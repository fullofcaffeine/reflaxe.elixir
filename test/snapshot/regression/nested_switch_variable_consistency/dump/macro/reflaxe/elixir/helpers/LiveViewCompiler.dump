@:nullSafety(Off)
class reflaxe.elixir.helpers.LiveViewCompiler {

	public function new[Function:(compiler : reflaxe.elixir.ElixirCompiler) -> Void]
		[Arg:reflaxe.elixir.ElixirCompiler] [Local compiler(28806):reflaxe.elixir.ElixirCompiler]
		[Block:reflaxe.elixir.ElixirCompiler]
			[Binop:reflaxe.elixir.ElixirCompiler]
				[Field:reflaxe.elixir.ElixirCompiler]
					[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
					[FInstance:reflaxe.elixir.ElixirCompiler]
						reflaxe.elixir.helpers.LiveViewCompiler
						compiler:reflaxe.elixir.ElixirCompiler
				=
				[Local compiler(28806):reflaxe.elixir.ElixirCompiler:reflaxe.elixir.ElixirCompiler]

	var compiler:reflaxe.elixir.ElixirCompiler;

	public function compileLiveViewClass[Function:(classType : haxe.macro.ClassType, varFields : Array<Dynamic>, funcFields : Array<Dynamic>) -> String]
		[Arg:haxe.macro.ClassType] [Local classType(28807):haxe.macro.ClassType]
		[Arg:Array<Dynamic>] [Local varFields(28808):Array<Dynamic>]
		[Arg:Array<Dynamic>] [Local funcFields(28809):Array<Dynamic>]
		[Block:Dynamic]
			[Var moduleName(28810):String]
				[Call:String]
					[Field:(haxeName : String) -> String]
						[TypeExpr reflaxe.elixir.helpers.NamingHelper:Class<reflaxe.elixir.helpers.NamingHelper>]
						[FStatic:(haxeName : String) -> String]
							reflaxe.elixir.helpers.NamingHelper
							getElixirModuleName:(haxeName : String) -> String
					[Call:String]
						[Field:(v : reflaxe.helpers.NameAndMeta) -> String]
							[TypeExpr reflaxe.helpers.NameMetaHelper:{ Statics reflaxe.helpers.NameMetaHelper }]
							[FStatic:(v : reflaxe.helpers.NameAndMeta) -> String]
								reflaxe.helpers.NameMetaHelper
								getNameOrNative:(v : reflaxe.helpers.NameAndMeta) -> String
						[Local classType(28807):haxe.macro.ClassType:haxe.macro.ClassType]
			[Var appName(28814):String]
				[Call:String]
					[Field:(moduleName : String) -> String]
						[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
						[FInstance:(moduleName : String) -> String]
							reflaxe.elixir.helpers.LiveViewCompiler
							extractAppName:(moduleName : String) -> String
					[Local moduleName(28810):String:String]
			[Var result(28815):String]
				[Binop:String]
					[Binop:String]
						[Const:String] "defmodule "
						+
						[Local moduleName(28810):String:String]
					+
					[Const:String] " do\n"
			[Binop:String]
				[Local result(28815):String:String]
				+=
				[Binop:String]
					[Binop:String]
						[Const:String] "  use "
						+
						[Local appName(28814):String:String]
					+
					[Const:String] "Web, :live_view\n\n"
			[If:Void]
				[Call:Bool]
					[Field:(funcFields : Array<Dynamic>) -> Bool]
						[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
						[FInstance:(funcFields : Array<Dynamic>) -> Bool]
							reflaxe.elixir.helpers.LiveViewCompiler
							needsCoreComponents:(funcFields : Array<Dynamic>) -> Bool
					[Local funcFields(28809):Array<Dynamic>:Array<Dynamic>]
				[Then:String] [Block:String]
					[Binop:String]
						[Local result(28815):String:String]
						+=
						[Binop:String]
							[Binop:String]
								[Const:String] "  alias "
								+
								[Local appName(28814):String:String]
							+
							[Const:String] "Web.CoreComponents\n\n"
			[Binop:String]
				[Local result(28815):String:String]
				+=
				[Call:String]
					[Field:(funcFields : Array<Dynamic>) -> String]
						[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
						[FInstance:(funcFields : Array<Dynamic>) -> String]
							reflaxe.elixir.helpers.LiveViewCompiler
							compileLiveViewCallbacks:(funcFields : Array<Dynamic>) -> String
					[Local funcFields(28809):Array<Dynamic>:Array<Dynamic>]
			[Block:Void]
				[Var `(28831):Int] [Const:Int] 0
				[While:Void]
					[Binop:Bool]
						[Local `(28831):Int:Int]
						<
						[Field:Int]
							[Local funcFields(28809):Array<Dynamic>:Array<Dynamic>]
							[FInstance:Int]
								Array<Dynamic>
								length:Int
					[Block:Void]
						[Var funcField(28829):Dynamic]
							[Array:Dynamic]
								[Local funcFields(28809):Array<Dynamic>:Array<Dynamic>]
								[Local `(28831):Int:Int]
						[Unop:Int]
							++
							Prefix
							[Local `(28831):Int:Int]
						[If:Void]
							[Unop:Bool]
								!
								Prefix
								[Call:Bool]
									[Field:(name : String) -> Bool]
										[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
										[FInstance:(name : String) -> Bool]
											reflaxe.elixir.helpers.LiveViewCompiler
											isLiveViewCallback:(name : String) -> Bool
									[Field:Dynamic]
										[Local funcField(28829):Dynamic:Dynamic]
										[FDynamic:Dynamic] name
							[Then:String] [Block:String]
								[Binop:String]
									[Local result(28815):String:String]
									+=
									[Binop:String]
										[Call:String]
											[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
												[Field:reflaxe.elixir.ElixirCompiler]
													[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
													[FInstance:reflaxe.elixir.ElixirCompiler]
														reflaxe.elixir.helpers.LiveViewCompiler
														compiler:reflaxe.elixir.ElixirCompiler
												[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
													reflaxe.elixir.ElixirCompiler
													compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
											[Local funcField(28829):Dynamic:Dynamic]
											[Const:Bool] true
										+
										[Const:String] "\n"
			[Binop:String]
				[Local result(28815):String:String]
				+=
				[Const:String] "end\n"
			[Return:Dynamic] [Local result(28815):String:String]

	function extractAppName[Function:(moduleName : String) -> String]
		[Arg:String] [Local moduleName(28811):String]
		[Block:Dynamic]
			[Var parts(28812):Array<String>]
				[Call:Array<String>]
					[Field:(delimiter : String) -> Array<String>]
						[Local moduleName(28811):String:String]
						[FInstance:(delimiter : String) -> Array<String>]
							String
							split:(delimiter : String) -> Array<String>
					[Const:String] "."
			[If:Void]
				[Binop:Bool]
					[Field:Int]
						[Local parts(28812):Array<String>:Array<String>]
						[FInstance:Int]
							Array<String>
							length:Int
					>
					[Const:Int] 0
				[Then:Void] [Block:Void]
					[Var webPart(28813):String]
						[Array:String]
							[Local parts(28812):Array<String>:Array<String>]
							[Const:Int] 0
					[If:Void]
						[Call:Bool]
							[Field:(s : String, end : String) -> Bool]
								[TypeExpr StringTools:{ Statics StringTools }]
								[FStatic:(s : String, end : String) -> Bool]
									StringTools
									endsWith:(s : String, end : String) -> Bool
							[Local webPart(28813):String:String]
							[Const:String] "Web"
						[Then:Dynamic] [Block:Dynamic]
							[Return:Dynamic]
								[Call:String]
									[Field:(startIndex : Int, ?endIndex : Null<Int>) -> String]
										[Local webPart(28813):String:String]
										[FInstance:(startIndex : Int, ?endIndex : Null<Int>) -> String]
											String
											substring:(startIndex : Int, ?endIndex : Null<Int>) -> String
									[Const:Int] 0
									[Binop:Int]
										[Field:Int]
											[Local webPart(28813):String:String]
											[FInstance:Int]
												String
												length:Int
										-
										[Const:Int] 3
			[Return:Dynamic] [Const:String] "App"

	function needsCoreComponents[Function:(funcFields : Array<Dynamic>) -> Bool]
		[Arg:Array<Dynamic>] [Local funcFields(28816):Array<Dynamic>]
		[Block:Dynamic]
			[Block:Void]
				[Var `(28818):Int] [Const:Int] 0
				[While:Void]
					[Binop:Bool]
						[Local `(28818):Int:Int]
						<
						[Field:Int]
							[Local funcFields(28816):Array<Dynamic>:Array<Dynamic>]
							[FInstance:Int]
								Array<Dynamic>
								length:Int
					[Block:Void]
						[Var funcField(28817):Dynamic]
							[Array:Dynamic]
								[Local funcFields(28816):Array<Dynamic>:Array<Dynamic>]
								[Local `(28818):Int:Int]
						[Unop:Int]
							++
							Prefix
							[Local `(28818):Int:Int]
						[If:Void]
							[Binop:Bool]
								[Field:Dynamic]
									[Local funcField(28817):Dynamic:Dynamic]
									[FDynamic:Dynamic] name
								==
								[Const:String] "render"
							[Then:Dynamic] [Block:Dynamic] [Return:Dynamic] [Const:Bool] true
			[Return:Dynamic] [Const:Bool] false

	function compileLiveViewCallbacks[Function:(funcFields : Array<Dynamic>) -> String]
		[Arg:Array<Dynamic>] [Local funcFields(28819):Array<Dynamic>]
		[Block:Dynamic]
			[Var result(28820):String] [Const:String] ""
			[Var callbacks(28821):Array<String>]
				[ArrayDecl:Array<String>]
					[Const:String] "mount"
					[Const:String] "render"
					[Const:String] "handle_event"
					[Const:String] "handle_info"
					[Const:String] "handle_params"
			[Block:Void]
				[Var `(28828):Int] [Const:Int] 0
				[While:Void]
					[Binop:Bool]
						[Local `(28828):Int:Int]
						<
						[Field:Int]
							[Local callbacks(28821):Array<String>:Array<String>]
							[FInstance:Int]
								Array<String>
								length:Int
					[Block:Void]
						[Var callbackName(28822):String]
							[Array:String]
								[Local callbacks(28821):Array<String>:Array<String>]
								[Local `(28828):Int:Int]
						[Unop:Int]
							++
							Prefix
							[Local `(28828):Int:Int]
						[Block:Void]
							[Var `(28827):Int] [Const:Int] 0
							[While:Void]
								[Binop:Bool]
									[Local `(28827):Int:Int]
									<
									[Field:Int]
										[Local funcFields(28819):Array<Dynamic>:Array<Dynamic>]
										[FInstance:Int]
											Array<Dynamic>
											length:Int
								[Block:Void]
									[Var funcField(28823):Dynamic]
										[Array:Dynamic]
											[Local funcFields(28819):Array<Dynamic>:Array<Dynamic>]
											[Local `(28827):Int:Int]
									[Unop:Int]
										++
										Prefix
										[Local `(28827):Int:Int]
									[If:Void]
										[Binop:Bool]
											[Field:Dynamic]
												[Local funcField(28823):Dynamic:Dynamic]
												[FDynamic:Dynamic] name
											==
											[Local callbackName(28822):String:String]
										[Then:String] [Block:String]
											[Binop:String]
												[Local result(28820):String:String]
												+=
												[Binop:String]
													[Call:String]
														[Field:(funcField : Dynamic, callbackName : String) -> String]
															[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
															[FInstance:(funcField : Dynamic, callbackName : String) -> String]
																reflaxe.elixir.helpers.LiveViewCompiler
																compileLiveViewCallback:(funcField : Dynamic, callbackName : String) -> String
														[Local funcField(28823):Dynamic:Dynamic]
														[Local callbackName(28822):String:String]
													+
													[Const:String] "\n"
			[Return:Dynamic] [Local result(28820):String:String]

	function compileLiveViewCallback[Function:(funcField : Dynamic, callbackName : String) -> String]
		[Arg:Dynamic] [Local funcField(28824):Dynamic]
		[Arg:String] [Local callbackName(28825):String]
		[Block:Dynamic]
			[Return:Dynamic]
				[Meta:String]
					:ast(switch (callbackName) {
	case "mount":
		compiler.compileFunction(funcField, true);	
	case "render":
		compileRenderFunction(funcField);	
	case "handle_event":
		compiler.compileFunction(funcField, true);	
	case "handle_info":
		compiler.compileFunction(funcField, true);	
	case "handle_params":
		compiler.compileFunction(funcField, true);	
	default:
		compiler.compileFunction(funcField, true);	
})
					[Switch:String]
						[Local callbackName(28825):String:String]
						[Case:String]
							[Const:String] "handle_event"
							[Block:String]
								[Block:String]
									[Call:String]
										[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
											[Field:reflaxe.elixir.ElixirCompiler]
												[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
												[FInstance:reflaxe.elixir.ElixirCompiler]
													reflaxe.elixir.helpers.LiveViewCompiler
													compiler:reflaxe.elixir.ElixirCompiler
											[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
												reflaxe.elixir.ElixirCompiler
												compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
										[Local funcField(28824):Dynamic:Dynamic]
										[Const:Bool] true
						[Case:String]
							[Const:String] "handle_info"
							[Block:String]
								[Block:String]
									[Call:String]
										[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
											[Field:reflaxe.elixir.ElixirCompiler]
												[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
												[FInstance:reflaxe.elixir.ElixirCompiler]
													reflaxe.elixir.helpers.LiveViewCompiler
													compiler:reflaxe.elixir.ElixirCompiler
											[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
												reflaxe.elixir.ElixirCompiler
												compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
										[Local funcField(28824):Dynamic:Dynamic]
										[Const:Bool] true
						[Case:String]
							[Const:String] "handle_params"
							[Block:String]
								[Block:String]
									[Call:String]
										[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
											[Field:reflaxe.elixir.ElixirCompiler]
												[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
												[FInstance:reflaxe.elixir.ElixirCompiler]
													reflaxe.elixir.helpers.LiveViewCompiler
													compiler:reflaxe.elixir.ElixirCompiler
											[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
												reflaxe.elixir.ElixirCompiler
												compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
										[Local funcField(28824):Dynamic:Dynamic]
										[Const:Bool] true
						[Case:String]
							[Const:String] "mount"
							[Block:String]
								[Block:String]
									[Call:String]
										[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
											[Field:reflaxe.elixir.ElixirCompiler]
												[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
												[FInstance:reflaxe.elixir.ElixirCompiler]
													reflaxe.elixir.helpers.LiveViewCompiler
													compiler:reflaxe.elixir.ElixirCompiler
											[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
												reflaxe.elixir.ElixirCompiler
												compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
										[Local funcField(28824):Dynamic:Dynamic]
										[Const:Bool] true
						[Case:String]
							[Const:String] "render"
							[Block:String]
								[Block:String]
									[Call:String]
										[Field:(funcField : Dynamic) -> String]
											[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
											[FInstance:(funcField : Dynamic) -> String]
												reflaxe.elixir.helpers.LiveViewCompiler
												compileRenderFunction:(funcField : Dynamic) -> String
										[Local funcField(28824):Dynamic:Dynamic]
						[Default:String]
							[Block:String]
								[Call:String]
									[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
										[Field:reflaxe.elixir.ElixirCompiler]
											[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
											[FInstance:reflaxe.elixir.ElixirCompiler]
												reflaxe.elixir.helpers.LiveViewCompiler
												compiler:reflaxe.elixir.ElixirCompiler
										[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
											reflaxe.elixir.ElixirCompiler
											compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
									[Local funcField(28824):Dynamic:Dynamic]
									[Const:Bool] true

	function compileRenderFunction[Function:(funcField : Dynamic) -> String]
		[Arg:Dynamic] [Local funcField(28826):Dynamic]
		[Block:Dynamic]
			[Return:Dynamic]
				[Call:String]
					[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
						[Field:reflaxe.elixir.ElixirCompiler]
							[Const:reflaxe.elixir.helpers.LiveViewCompiler] this
							[FInstance:reflaxe.elixir.ElixirCompiler]
								reflaxe.elixir.helpers.LiveViewCompiler
								compiler:reflaxe.elixir.ElixirCompiler
						[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
							reflaxe.elixir.ElixirCompiler
							compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
					[Local funcField(28826):Dynamic:Dynamic]
					[Const:Bool] true

	function isLiveViewCallback[Function:(name : String) -> Bool]
		[Arg:String] [Local name(28830):String]
		[Block:Dynamic]
			[Return:Dynamic]
				[Meta:Bool]
					:ast(switch (name) {
	case "mount", "render", "handle_event", "handle_info", "handle_params":
		true;	
	case "terminate", "update":
		true;	
	default:
		false;	
})
					[Switch:Bool]
						[Local name(28830):String:String]
						[Case:Bool]
							[Const:String] "handle_event"
							[Const:String] "handle_info"
							[Const:String] "handle_params"
							[Const:String] "mount"
							[Const:String] "render"
							[Block:Bool] [Block:Bool] [Const:Bool] true
						[Case:Bool]
							[Const:String] "terminate"
							[Const:String] "update"
							[Block:Bool] [Block:Bool] [Const:Bool] true
						[Default:Bool] [Block:Bool] [Const:Bool] false
}