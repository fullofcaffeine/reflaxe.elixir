@:used
class haxe.io.Input {

	public var bigEndian(default,set):Bool;

	function set_bigEndian(b:Bool) {
		return b;
	}

	public function readByte() {
		return -1;
	}

	public function readBytes(b:haxe.io.Bytes, pos:Int, len:Int) {
		if ((pos < 0 || len < 0 || pos + len > b.length)) throw "Invalid parameters";
		var k = len;
		while ((k > 0)) {
			var byte = this.readByte();
			if ((byte < 0)) break;
			b.set(pos, byte);
			pos ++;
			k --;
		};
		return len - k;
	}

	public function readAll(bufsize:Null<Int> = null) {
		if ((bufsize == null)) bufsize = 4096;
		var buf = haxe.io.Bytes.alloc(bufsize);
		var total = haxe.io.Bytes.alloc(0);
		var len = 0;
		while ((true)) {
			var n = this.readBytes(buf, 0, bufsize);
			if ((n == 0)) break;
			var newTotal = haxe.io.Bytes.alloc(len + n);
			newTotal.blit(0, total, 0, len);
			newTotal.blit(len, buf, 0, n);
			total = newTotal;
			len += n;
		};
		return total;
	}

	public function readString(len:Int) {
		var b = haxe.io.Bytes.alloc(len);
		var actual = this.readBytes(b, 0, len);
		if ((actual < len)) {
			var smaller = haxe.io.Bytes.alloc(actual);
			smaller.blit(0, b, 0, actual);
			b = smaller;
		};
		return b.toString();
	}

	public function readLine() {
		var buf = new StringBuf();
		var last;
		while (((last = this.readByte()) >= 0)) {
			if ((last == 10)) break;
			if ((last != 13)) buf.addChar(last);
		};
		return buf.toString();
	}

	public function close() {}
}