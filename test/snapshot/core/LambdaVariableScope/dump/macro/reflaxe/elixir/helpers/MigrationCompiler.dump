@:nullSafety(Off)
class reflaxe.elixir.helpers.MigrationCompiler {

	public function new[Function:(compiler : reflaxe.elixir.ElixirCompiler) -> Void]
		[Arg:reflaxe.elixir.ElixirCompiler] [Local compiler(29259):reflaxe.elixir.ElixirCompiler]
		[Block:reflaxe.elixir.ElixirCompiler]
			[Binop:reflaxe.elixir.ElixirCompiler]
				[Field:reflaxe.elixir.ElixirCompiler]
					[Const:reflaxe.elixir.helpers.MigrationCompiler] this
					[FInstance:reflaxe.elixir.ElixirCompiler]
						reflaxe.elixir.helpers.MigrationCompiler
						compiler:reflaxe.elixir.ElixirCompiler
				=
				[Local compiler(29259):reflaxe.elixir.ElixirCompiler:reflaxe.elixir.ElixirCompiler]

	var compiler:reflaxe.elixir.ElixirCompiler;

	public function compileMigrationClass[Function:(classType : haxe.macro.ClassType, varFields : Array<Dynamic>, funcFields : Array<Dynamic>) -> String]
		[Arg:haxe.macro.ClassType] [Local classType(29260):haxe.macro.ClassType]
		[Arg:Array<Dynamic>] [Local varFields(29261):Array<Dynamic>]
		[Arg:Array<Dynamic>] [Local funcFields(29262):Array<Dynamic>]
		[Block:Dynamic]
			[Var moduleName(29263):String]
				[Call:String]
					[Field:(classType : haxe.macro.ClassType) -> String]
						[Field:reflaxe.elixir.ElixirCompiler]
							[Const:reflaxe.elixir.helpers.MigrationCompiler] this
							[FInstance:reflaxe.elixir.ElixirCompiler]
								reflaxe.elixir.helpers.MigrationCompiler
								compiler:reflaxe.elixir.ElixirCompiler
						[FInstance:(classType : haxe.macro.ClassType) -> String]
							reflaxe.elixir.ElixirCompiler
							getModuleName:(classType : haxe.macro.ClassType) -> String
					[Local classType(29260):haxe.macro.ClassType:haxe.macro.ClassType]
			[Var result(29264):String]
				[Binop:String]
					[Binop:String]
						[Const:String] "defmodule "
						+
						[Local moduleName(29263):String:String]
					+
					[Const:String] " do\n"
			[Binop:String]
				[Local result(29264):String:String]
				+=
				[Const:String] "  use Ecto.Migration\n\n"
			[Var upFunction(29269):Null<Unknown<66>>]
				[Call:Dynamic]
					[Field:(funcFields : Array<Dynamic>, name : String) -> Dynamic]
						[Const:reflaxe.elixir.helpers.MigrationCompiler] this
						[FInstance:(funcFields : Array<Dynamic>, name : String) -> Dynamic]
							reflaxe.elixir.helpers.MigrationCompiler
							findFunction:(funcFields : Array<Dynamic>, name : String) -> Dynamic
					[Local funcFields(29262):Array<Dynamic>:Array<Dynamic>]
					[Const:String] "up"
			[Var downFunction(29270):Null<Unknown<67>>]
				[Call:Dynamic]
					[Field:(funcFields : Array<Dynamic>, name : String) -> Dynamic]
						[Const:reflaxe.elixir.helpers.MigrationCompiler] this
						[FInstance:(funcFields : Array<Dynamic>, name : String) -> Dynamic]
							reflaxe.elixir.helpers.MigrationCompiler
							findFunction:(funcFields : Array<Dynamic>, name : String) -> Dynamic
					[Local funcFields(29262):Array<Dynamic>:Array<Dynamic>]
					[Const:String] "down"
			[If:Void]
				[Binop:Bool]
					[Local upFunction(29269):Null<Unknown<66>>:Null<Unknown<66>>]
					!=
					[Const:Null<Unknown<66>>] null
				[Then:String] [Block:String]
					[Binop:String]
						[Local result(29264):String:String]
						+=
						[Call:String]
							[Field:(funcField : Dynamic, name : String) -> String]
								[Const:reflaxe.elixir.helpers.MigrationCompiler] this
								[FInstance:(funcField : Dynamic, name : String) -> String]
									reflaxe.elixir.helpers.MigrationCompiler
									compileMigrationFunction:(funcField : Dynamic, name : String) -> String
							[Local upFunction(29269):Null<Unknown<66>>:Null<Unknown<66>>]
							[Const:String] "up"
				[Else:String] [Block:String]
					[Binop:String]
						[Local result(29264):String:String]
						+=
						[Const:String] "  def up do\n    # Migration up logic here\n  end\n\n"
			[If:Void]
				[Binop:Bool]
					[Local downFunction(29270):Null<Unknown<67>>:Null<Unknown<67>>]
					!=
					[Const:Null<Unknown<67>>] null
				[Then:String] [Block:String]
					[Binop:String]
						[Local result(29264):String:String]
						+=
						[Call:String]
							[Field:(funcField : Dynamic, name : String) -> String]
								[Const:reflaxe.elixir.helpers.MigrationCompiler] this
								[FInstance:(funcField : Dynamic, name : String) -> String]
									reflaxe.elixir.helpers.MigrationCompiler
									compileMigrationFunction:(funcField : Dynamic, name : String) -> String
							[Local downFunction(29270):Null<Unknown<67>>:Null<Unknown<67>>]
							[Const:String] "down"
				[Else:String] [Block:String]
					[Binop:String]
						[Local result(29264):String:String]
						+=
						[Const:String] "  def down do\n    # Migration down logic here\n  end\n\n"
			[Block:Void]
				[Var `(29287):Int] [Const:Int] 0
				[While:Void]
					[Binop:Bool]
						[Local `(29287):Int:Int]
						<
						[Field:Int]
							[Local funcFields(29262):Array<Dynamic>:Array<Dynamic>]
							[FInstance:Int]
								Array<Dynamic>
								length:Int
					[Block:Void]
						[Var funcField(29285):Dynamic]
							[Array:Dynamic]
								[Local funcFields(29262):Array<Dynamic>:Array<Dynamic>]
								[Local `(29287):Int:Int]
						[Unop:Int]
							++
							Prefix
							[Local `(29287):Int:Int]
						[Var name(29286):String]
							[Field:Dynamic]
								[Local funcField(29285):Dynamic:Dynamic]
								[FDynamic:Dynamic] name
						[If:Void]
							[Binop:Bool]
								[Binop:Bool]
									[Binop:Bool]
										[Local name(29286):String:String]
										!=
										[Const:String] "up"
									&&
									[Binop:Bool]
										[Local name(29286):String:String]
										!=
										[Const:String] "down"
								&&
								[Binop:Bool]
									[Local name(29286):String:String]
									!=
									[Const:String] "new"
							[Then:String] [Block:String]
								[Binop:String]
									[Local result(29264):String:String]
									+=
									[Binop:String]
										[Call:String]
											[Field:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
												[Field:reflaxe.elixir.ElixirCompiler]
													[Const:reflaxe.elixir.helpers.MigrationCompiler] this
													[FInstance:reflaxe.elixir.ElixirCompiler]
														reflaxe.elixir.helpers.MigrationCompiler
														compiler:reflaxe.elixir.ElixirCompiler
												[FInstance:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String]
													reflaxe.elixir.ElixirCompiler
													compileFunction:(funcField : reflaxe.data.ClassFuncData, ?isStatic : Bool) -> String
											[Local funcField(29285):Dynamic:Dynamic]
											[Const:Bool] true
										+
										[Const:String] "\n"
			[Binop:String]
				[Local result(29264):String:String]
				+=
				[Const:String] "end\n"
			[Return:Dynamic] [Local result(29264):String:String]

	function findFunction[Function:(funcFields : Array<Dynamic>, name : String) -> Dynamic]
		[Arg:Array<Dynamic>] [Local funcFields(29265):Array<Dynamic>]
		[Arg:String] [Local name(29266):String]
		[Block:Dynamic]
			[Block:Void]
				[Var `(29268):Int] [Const:Int] 0
				[While:Void]
					[Binop:Bool]
						[Local `(29268):Int:Int]
						<
						[Field:Int]
							[Local funcFields(29265):Array<Dynamic>:Array<Dynamic>]
							[FInstance:Int]
								Array<Dynamic>
								length:Int
					[Block:Void]
						[Var funcField(29267):Dynamic]
							[Array:Dynamic]
								[Local funcFields(29265):Array<Dynamic>:Array<Dynamic>]
								[Local `(29268):Int:Int]
						[Unop:Int]
							++
							Prefix
							[Local `(29268):Int:Int]
						[If:Void]
							[Binop:Bool]
								[Field:Dynamic]
									[Local funcField(29267):Dynamic:Dynamic]
									[FDynamic:Dynamic] name
								==
								[Local name(29266):String:String]
							[Then:Dynamic] [Block:Dynamic] [Return:Dynamic] [Local funcField(29267):Dynamic:Dynamic]
			[Return:Dynamic] [Const:Dynamic] null

	function compileMigrationFunction[Function:(funcField : Dynamic, name : String) -> String]
		[Arg:Dynamic] [Local funcField(29271):Dynamic]
		[Arg:String] [Local name(29272):String]
		[Block:Dynamic]
			[Return:Dynamic]
				[Binop:String]
					[Binop:String]
						[Binop:String]
							[Binop:String]
								[Const:String] "  def "
								+
								[Local name(29272):String:String]
							+
							[Const:String] " do\n"
						+
						[Call:String]
							[Field:(expr : haxe.macro.TypedExpr) -> String]
								[Const:reflaxe.elixir.helpers.MigrationCompiler] this
								[FInstance:(expr : haxe.macro.TypedExpr) -> String]
									reflaxe.elixir.helpers.MigrationCompiler
									compileMigrationBody:(expr : haxe.macro.TypedExpr) -> String
							[Field:Dynamic]
								[Local funcField(29271):Dynamic:Dynamic]
								[FDynamic:Dynamic] expr
					+
					[Const:String] "  end\n\n"

	function compileMigrationBody[Function:(expr : haxe.macro.TypedExpr) -> String]
		[Arg:haxe.macro.TypedExpr] [Local expr(29273):haxe.macro.TypedExpr]
		[Block:Dynamic]
			[Var body(29274):Null<String>]
				[Call:Null<String>]
					[Field:(expr : haxe.macro.TypedExpr, ?topLevel : Bool) -> Null<String>]
						[Field:reflaxe.elixir.ElixirCompiler]
							[Const:reflaxe.elixir.helpers.MigrationCompiler] this
							[FInstance:reflaxe.elixir.ElixirCompiler]
								reflaxe.elixir.helpers.MigrationCompiler
								compiler:reflaxe.elixir.ElixirCompiler
						[FInstance:(expr : haxe.macro.TypedExpr, ?topLevel : Bool) -> Null<String>]
							reflaxe.elixir.ElixirCompiler
							compileExpression:(expr : haxe.macro.TypedExpr, ?topLevel : Bool) -> Null<String>
					[Local expr(29273):haxe.macro.TypedExpr:haxe.macro.TypedExpr]
					[Const:Null<Bool>] null
			[Var lines(29275):Array<String>]
				[Call:Array<String>]
					[Field:(delimiter : String) -> Array<String>]
						[Local body(29274):Null<String>:Null<String>]
						[FInstance:(delimiter : String) -> Array<String>]
							String
							split:(delimiter : String) -> Array<String>
					[Const:String] "\n"
			[Return:Dynamic]
				[Binop:String]
					[Call:String]
						[Field:(sep : String) -> String]
							[Block:Array<String>]
								[Var `(29280):Array<String>] [ArrayDecl:Array<String>]
								[Block:Void]
									[Var `(29281):Int] [Const:Int] 0
									[Var `(29282):Array<String>] [Local lines(29275):Array<String>:Array<String>]
									[While:Void]
										[Binop:Bool]
											[Local `(29281):Int:Int]
											<
											[Field:Int]
												[Local `(29282):Array<String>:Array<String>]
												[FInstance:Int]
													Array<String>
													length:Int
										[Block:Void]
											[Var v(29283):String]
												[Array:String]
													[Local `(29282):Array<String>:Array<String>]
													[Local `(29281):Int:Int]
											[Unop:Int]
												++
												Prefix
												[Local `(29281):Int:Int]
											[Call:Int]
												[Field:(x : String) -> Int]
													[Local `(29280):Array<String>:Array<String>]
													[FInstance:(x : String) -> Int]
														Array<String>
														push:(x : Array.T) -> Int
												[Call:String]
													[Function:(line : String) -> String]
														[Arg:String] [Local line(29284):String]
														[Block:Dynamic]
															[Return:Dynamic]
																[Binop:String]
																	[Const:String] "    "
																	+
																	[Local line(29284):String:String]
													[Local v(29283):String:String]
								[Local `(29280):Array<String>:Array<String>]
							[FInstance:(sep : String) -> String]
								Array<String>
								join:(sep : String) -> String
						[Const:String] "\n"
					+
					[Const:String] "\n"
}