@:directlyUsed @:used
class Std {

	@:has_untyped
	public static function string<T>(value:string.T) {
		return __elixir__("inspect({0})", value);
	}

	@:has_untyped
	public static function parseInt(str:String) {
		return __elixir__("\n            case Integer.parse({0}) do\n                {num, _} -> num\n                :error -> nil\n            end\n        ", str);
	}

	@:has_untyped
	public static function parseFloat(str:String) {
		return __elixir__("\n            case Float.parse({0}) do\n                {num, _} -> num\n                :error -> nil\n            end\n        ", str);
	}

	@:has_untyped
	public static function is(value:Dynamic, type:Dynamic) {
		return __elixir__("\n(\n            # Convert type to string for comparison\n            type_str = to_string({1})\n            \n            case type_str do\n                \"String\" -> is_binary({0})\n                \"Float\" -> is_float({0})\n                \"Int\" -> is_integer({0})\n                \"Bool\" -> is_boolean({0})\n                \"Array\" -> is_list({0})\n                \"Map\" -> is_map({0})\n                _ ->\n                    # For user-defined types, check if it's a struct with matching __struct__ field\n                    case {0} do\n                        %{__struct__: struct_type} -> struct_type == {1}\n                        # For enums (tagged tuples), check if first element matches the type atom\n                        {tag, _} when is_atom(tag) -> tag == {1}\n                        {tag, _, _} when is_atom(tag) -> tag == {1}\n                        {tag, _, _, _} when is_atom(tag) -> tag == {1}\n                        _ -> false\n                    end\n            end\n        \n)\n", value, type);
	}

	public static inline function isOfType(value:Dynamic, type:Dynamic) {
		return Std.is(value, type);
	}

	@:has_untyped
	public static function random() {
		return __elixir__(":rand.uniform()");
	}

	@:has_untyped
	public static function int(value:Float) {
		return __elixir__("trunc({0})", value);
	}
}