class reflaxe.elixir.ast.transformers.HandleEventIdExtractNormalizeTransforms {

	public static function pass(ast:reflaxe.elixir.ast.ElixirAST) {
		return reflaxe.elixir.ast.ElixirASTTransformer.transformNode(ast, function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case EDef(name, args, guards, body) if (isHandleEvent3(name, args)):
		var nb = normalizeIdExtract(body);
		makeASTWithMeta(EDef(name, args, guards, nb), n.metadata, n.pos);	
	case EDefp(name2, args2, guards2, body2) if (isHandleEvent3(name2, args2)):
		var nb2 = normalizeIdExtract(body2);
		makeASTWithMeta(EDefp(name2, args2, guards2, nb2), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 2: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						var ` = `[3];
						{
							var name = `;
							var args = `;
							var guards = `;
							var body = `;
							if (if (name != "handle_event" || args == null || args.length != 3) {
								false;
							} else {
								@:ast(switch (args[0]) {
	case PLiteral({ def : EString(_) }):
		true;	
	default:
		false;	
}) {
									var ` = args[0];
									if (enumIndex ` == 1) {
										var ` = `[0];
										{
											var ` = `.def;
											var ` = `.metadata;
											var ` = `.pos;
											if (enumIndex ` == 32) {
												var ` = `[0];
												{
													true;
												};
											} else {
												false;
											};
										};
									} else {
										false;
									};
								};
							}) {
								var nb = reflaxe.elixir.ast.transformers.HandleEventIdExtractNormalizeTransforms.normalizeIdExtract(body);
								{def : reflaxe.elixir.ast.ElixirASTDef.EDef(name, args, guards, nb), metadata : n.metadata, pos : n.pos};
							} else {
								n;
							};
						};
					};
					case 3: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						var ` = `[3];
						{
							var name2 = `;
							var args2 = `;
							var guards2 = `;
							var body2 = `;
							if (if (name2 != "handle_event" || args2 == null || args2.length != 3) {
								false;
							} else {
								@:ast(switch (args[0]) {
	case PLiteral({ def : EString(_) }):
		true;	
	default:
		false;	
}) {
									var ` = args2[0];
									if (enumIndex ` == 1) {
										var ` = `[0];
										{
											var ` = `.def;
											var ` = `.metadata;
											var ` = `.pos;
											if (enumIndex ` == 32) {
												var ` = `[0];
												{
													true;
												};
											} else {
												false;
											};
										};
									} else {
										false;
									};
								};
							}) {
								var nb2 = reflaxe.elixir.ast.transformers.HandleEventIdExtractNormalizeTransforms.normalizeIdExtract(body2);
								{def : reflaxe.elixir.ast.ElixirASTDef.EDefp(name2, args2, guards2, nb2), metadata : n.metadata, pos : n.pos};
							} else {
								n;
							};
						};
					};
					default: {
						n;
					}
				};
			};
		});
	}

	static inline function isHandleEvent3(name:String, args:Array<reflaxe.elixir.ast.EPattern>) {
		if (name != "handle_event" || args == null || args.length != 3) {
			return false;
		};
		return @:ast(switch (args[0]) {
	case PLiteral({ def : EString(_) }):
		true;	
	default:
		false;	
}) {
			var ` = args[0];
			if (enumIndex ` == 1) {
				var ` = `[0];
				{
					var ` = `.def;
					var ` = `.metadata;
					var ` = `.pos;
					if (enumIndex ` == 32) {
						var ` = `[0];
						{
							true;
						};
					} else {
						false;
					};
				};
			} else {
				false;
			};
		};
	}

	static inline function isMapGetId(expr:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
			var ` = expr.def;
			switch (enumIndex `) {
				case 22: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var target = `;
						var funcName = `;
						var a2 = `;
						if (funcName == "get" && a2 != null && a2.length >= 2) {
							@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
								var ` = target.def;
								if (enumIndex ` == 38) {
									var ` = `[0];
									{
										var m2 = `;
										if (m2 == "Map") {
											@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
												var ` = a2[1].def;
												if (enumIndex ` == 32) {
													var ` = `[0];
													{
														var s2 = `;
														if (s2 == "id") {
															a2[0];
														} else {
															null;
														};
													};
												} else {
													null;
												};
											};
										} else {
											null;
										};
									};
								} else {
									null;
								};
							};
						} else {
							null;
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (` == "get") {
						{
							var mod = `;
							var a = `;
							if (a != null && a.length >= 2) {
								@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
									var ` = mod.def;
									if (enumIndex ` == 38) {
										var ` = `[0];
										{
											var m = `;
											if (m == "Map") {
												@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
													var ` = a[1].def;
													if (enumIndex ` == 32) {
														var ` = `[0];
														{
															var s = `;
															if (s == "id") {
																a[0];
															} else {
																null;
															};
														};
													} else {
														null;
													};
												};
											} else {
												null;
											};
										};
									} else {
										null;
									};
								};
							} else {
								null;
							};
						};
					} else {
						null;
					};
				};
				default: {
					null;
				}
			};
		};
	}

	static function normalizeIdExtract(body:reflaxe.elixir.ast.ElixirAST) {
		return reflaxe.elixir.ast.ElixirASTTransformer.transformNode(body, function(x:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (x.def) {
	case EIf(cond, thenE, elseE):
		var recvCond = isKernelIsBinaryOnMapGetId(cond);
		var recvThen = isStringToIntegerOnMapGetId(thenE);
		var recvElse = isMapGetId(elseE);
		if (recvCond != null && recvThen != null && recvElse != null) {
			Sys.println("[HandleEventIdExtractNormalize] normalizing id branches to common receiver");
			var fixedCond = replaceMapGetReceiver(cond, recvElse);
			var fixedThen = replaceMapGetReceiver(thenE, recvElse);
			makeASTWithMeta(EIf(fixedCond, fixedThen, elseE), x.metadata, x.pos);
		} else x;	
	default:
		x;	
}) {
				var ` = x.def;
				if (enumIndex ` == 10) {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var cond = `;
						var thenE = `;
						var elseE = `;
						{
							var recvCond = @:ast(switch (e.def) {
	case ERemoteCall({ def : EVar("Kernel") }, "is_binary", [arg]) | ECall({ def : EVar("Kernel") }, "is_binary", [arg]):
		isMapGetId(arg);	
	default:
		null;	
}) {
								var ` = cond.def;
								switch (enumIndex `) {
									case 22: {
										var ` = `[0];
										var ` = `[1];
										var ` = `[2];
										if (` == null) {
											null;
										} else {
											var ` = `.def;
											var ` = `.metadata;
											var ` = `.pos;
											if (enumIndex ` == 38) {
												var ` = `[0];
												if (` == "Kernel") {
													if (` == "is_binary") {
														if (`.length == 1) {
															var ` = `[0];
															{
																var arg = `;
																{
																	@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = arg.def;
																		switch (enumIndex `) {
																			case 22: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				{
																					var target = `;
																					var funcName = `;
																					var a2 = `;
																					if (funcName == "get" && a2 != null && a2.length >= 2) {
																						@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																							var ` = target.def;
																							if (enumIndex ` == 38) {
																								var ` = `[0];
																								{
																									var m2 = `;
																									if (m2 == "Map") {
																										@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																											var ` = a2[1].def;
																											if (enumIndex ` == 32) {
																												var ` = `[0];
																												{
																													var s2 = `;
																													if (s2 == "id") {
																														a2[0];
																													} else {
																														null;
																													};
																												};
																											} else {
																												null;
																											};
																										};
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			};
																			case 24: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				if (` == "get") {
																					{
																						var mod = `;
																						var a = `;
																						if (a != null && a.length >= 2) {
																							@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																								var ` = mod.def;
																								if (enumIndex ` == 38) {
																									var ` = `[0];
																									{
																										var m = `;
																										if (m == "Map") {
																											@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																												var ` = a[1].def;
																												if (enumIndex ` == 32) {
																													var ` = `[0];
																													{
																														var s = `;
																														if (s == "id") {
																															a[0];
																														} else {
																															null;
																														};
																													};
																												} else {
																													null;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																			default: {
																				null;
																			}
																		};
																	};
																};
															};
														} else {
															null;
														};
													} else {
														null;
													};
												} else {
													null;
												};
											} else {
												null;
											};
										};
									};
									case 24: {
										var ` = `[0];
										var ` = `[1];
										var ` = `[2];
										{
											var ` = `.def;
											var ` = `.metadata;
											var ` = `.pos;
											if (enumIndex ` == 38) {
												var ` = `[0];
												if (` == "Kernel") {
													if (` == "is_binary") {
														if (`.length == 1) {
															var ` = `[0];
															{
																var arg = `;
																{
																	@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = arg.def;
																		switch (enumIndex `) {
																			case 22: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				{
																					var target = `;
																					var funcName = `;
																					var a2 = `;
																					if (funcName == "get" && a2 != null && a2.length >= 2) {
																						@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																							var ` = target.def;
																							if (enumIndex ` == 38) {
																								var ` = `[0];
																								{
																									var m2 = `;
																									if (m2 == "Map") {
																										@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																											var ` = a2[1].def;
																											if (enumIndex ` == 32) {
																												var ` = `[0];
																												{
																													var s2 = `;
																													if (s2 == "id") {
																														a2[0];
																													} else {
																														null;
																													};
																												};
																											} else {
																												null;
																											};
																										};
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			};
																			case 24: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				if (` == "get") {
																					{
																						var mod = `;
																						var a = `;
																						if (a != null && a.length >= 2) {
																							@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																								var ` = mod.def;
																								if (enumIndex ` == 38) {
																									var ` = `[0];
																									{
																										var m = `;
																										if (m == "Map") {
																											@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																												var ` = a[1].def;
																												if (enumIndex ` == 32) {
																													var ` = `[0];
																													{
																														var s = `;
																														if (s == "id") {
																															a[0];
																														} else {
																															null;
																														};
																													};
																												} else {
																													null;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																			default: {
																				null;
																			}
																		};
																	};
																};
															};
														} else {
															null;
														};
													} else {
														null;
													};
												} else {
													null;
												};
											} else {
												null;
											};
										};
									};
									default: {
										null;
									}
								};
							};
							var recvThen = @:ast(switch (e.def) {
	case ERemoteCall({ def : EVar("String") }, "to_integer", [arg]) | ECall({ def : EVar("String") }, "to_integer", [arg]):
		isMapGetId(arg);	
	default:
		null;	
}) {
								var ` = thenE.def;
								switch (enumIndex `) {
									case 22: {
										var ` = `[0];
										var ` = `[1];
										var ` = `[2];
										if (` == null) {
											null;
										} else {
											var ` = `.def;
											var ` = `.metadata;
											var ` = `.pos;
											if (enumIndex ` == 38) {
												var ` = `[0];
												if (` == "String") {
													if (` == "to_integer") {
														if (`.length == 1) {
															var ` = `[0];
															{
																var arg = `;
																{
																	@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = arg.def;
																		switch (enumIndex `) {
																			case 22: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				{
																					var target = `;
																					var funcName = `;
																					var a2 = `;
																					if (funcName == "get" && a2 != null && a2.length >= 2) {
																						@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																							var ` = target.def;
																							if (enumIndex ` == 38) {
																								var ` = `[0];
																								{
																									var m2 = `;
																									if (m2 == "Map") {
																										@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																											var ` = a2[1].def;
																											if (enumIndex ` == 32) {
																												var ` = `[0];
																												{
																													var s2 = `;
																													if (s2 == "id") {
																														a2[0];
																													} else {
																														null;
																													};
																												};
																											} else {
																												null;
																											};
																										};
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			};
																			case 24: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				if (` == "get") {
																					{
																						var mod = `;
																						var a = `;
																						if (a != null && a.length >= 2) {
																							@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																								var ` = mod.def;
																								if (enumIndex ` == 38) {
																									var ` = `[0];
																									{
																										var m = `;
																										if (m == "Map") {
																											@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																												var ` = a[1].def;
																												if (enumIndex ` == 32) {
																													var ` = `[0];
																													{
																														var s = `;
																														if (s == "id") {
																															a[0];
																														} else {
																															null;
																														};
																													};
																												} else {
																													null;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																			default: {
																				null;
																			}
																		};
																	};
																};
															};
														} else {
															null;
														};
													} else {
														null;
													};
												} else {
													null;
												};
											} else {
												null;
											};
										};
									};
									case 24: {
										var ` = `[0];
										var ` = `[1];
										var ` = `[2];
										{
											var ` = `.def;
											var ` = `.metadata;
											var ` = `.pos;
											if (enumIndex ` == 38) {
												var ` = `[0];
												if (` == "String") {
													if (` == "to_integer") {
														if (`.length == 1) {
															var ` = `[0];
															{
																var arg = `;
																{
																	@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = arg.def;
																		switch (enumIndex `) {
																			case 22: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				{
																					var target = `;
																					var funcName = `;
																					var a2 = `;
																					if (funcName == "get" && a2 != null && a2.length >= 2) {
																						@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																							var ` = target.def;
																							if (enumIndex ` == 38) {
																								var ` = `[0];
																								{
																									var m2 = `;
																									if (m2 == "Map") {
																										@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																											var ` = a2[1].def;
																											if (enumIndex ` == 32) {
																												var ` = `[0];
																												{
																													var s2 = `;
																													if (s2 == "id") {
																														a2[0];
																													} else {
																														null;
																													};
																												};
																											} else {
																												null;
																											};
																										};
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			};
																			case 24: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				if (` == "get") {
																					{
																						var mod = `;
																						var a = `;
																						if (a != null && a.length >= 2) {
																							@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																								var ` = mod.def;
																								if (enumIndex ` == 38) {
																									var ` = `[0];
																									{
																										var m = `;
																										if (m == "Map") {
																											@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																												var ` = a[1].def;
																												if (enumIndex ` == 32) {
																													var ` = `[0];
																													{
																														var s = `;
																														if (s == "id") {
																															a[0];
																														} else {
																															null;
																														};
																													};
																												} else {
																													null;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																			default: {
																				null;
																			}
																		};
																	};
																};
															};
														} else {
															null;
														};
													} else {
														null;
													};
												} else {
													null;
												};
											} else {
												null;
											};
										};
									};
									default: {
										null;
									}
								};
							};
							var recvElse = @:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
								var ` = elseE.def;
								switch (enumIndex `) {
									case 22: {
										var ` = `[0];
										var ` = `[1];
										var ` = `[2];
										{
											var target = `;
											var funcName = `;
											var a2 = `;
											if (funcName == "get" && a2 != null && a2.length >= 2) {
												@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
													var ` = target.def;
													if (enumIndex ` == 38) {
														var ` = `[0];
														{
															var m2 = `;
															if (m2 == "Map") {
																@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																	var ` = a2[1].def;
																	if (enumIndex ` == 32) {
																		var ` = `[0];
																		{
																			var s2 = `;
																			if (s2 == "id") {
																				a2[0];
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														};
													} else {
														null;
													};
												};
											} else {
												null;
											};
										};
									};
									case 24: {
										var ` = `[0];
										var ` = `[1];
										var ` = `[2];
										if (` == "get") {
											{
												var mod = `;
												var a = `;
												if (a != null && a.length >= 2) {
													@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
														var ` = mod.def;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var m = `;
																if (m == "Map") {
																	@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																		var ` = a[1].def;
																		if (enumIndex ` == 32) {
																			var ` = `[0];
																			{
																				var s = `;
																				if (s == "id") {
																					a[0];
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												} else {
													null;
												};
											};
										} else {
											null;
										};
									};
									default: {
										null;
									}
								};
							};
							if (recvCond != null && recvThen != null && recvElse != null) {
								Sys.println("[HandleEventIdExtractNormalize] normalizing id branches to common receiver");
								var fixedCond = reflaxe.elixir.ast.transformers.HandleEventIdExtractNormalizeTransforms.replaceMapGetReceiver(cond, recvElse);
								var fixedThen = reflaxe.elixir.ast.transformers.HandleEventIdExtractNormalizeTransforms.replaceMapGetReceiver(thenE, recvElse);
								{def : reflaxe.elixir.ast.ElixirASTDef.EIf(fixedCond, fixedThen, elseE), metadata : x.metadata, pos : x.pos};
							} else {
								x;
							};
						};
					};
				} else {
					x;
				};
			};
		});
	}

	static inline function isKernelIsBinaryOnMapGetId(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall({ def : EVar("Kernel") }, "is_binary", [arg]) | ECall({ def : EVar("Kernel") }, "is_binary", [arg]):
		isMapGetId(arg);	
	default:
		null;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 22: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (` == null) {
						null;
					} else {
						var ` = `.def;
						var ` = `.metadata;
						var ` = `.pos;
						if (enumIndex ` == 38) {
							var ` = `[0];
							if (` == "Kernel") {
								if (` == "is_binary") {
									if (`.length == 1) {
										var ` = `[0];
										{
											var arg = `;
											{
												@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
													var ` = arg.def;
													switch (enumIndex `) {
														case 22: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															{
																var target = `;
																var funcName = `;
																var a2 = `;
																if (funcName == "get" && a2 != null && a2.length >= 2) {
																	@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = target.def;
																		if (enumIndex ` == 38) {
																			var ` = `[0];
																			{
																				var m2 = `;
																				if (m2 == "Map") {
																					@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																						var ` = a2[1].def;
																						if (enumIndex ` == 32) {
																							var ` = `[0];
																							{
																								var s2 = `;
																								if (s2 == "id") {
																									a2[0];
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														};
														case 24: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															if (` == "get") {
																{
																	var mod = `;
																	var a = `;
																	if (a != null && a.length >= 2) {
																		@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = mod.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var m = `;
																					if (m == "Map") {
																						@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																							var ` = a[1].def;
																							if (enumIndex ` == 32) {
																								var ` = `[0];
																								{
																									var s = `;
																									if (s == "id") {
																										a[0];
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														};
														default: {
															null;
														}
													};
												};
											};
										};
									} else {
										null;
									};
								} else {
									null;
								};
							} else {
								null;
							};
						} else {
							null;
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var ` = `.def;
						var ` = `.metadata;
						var ` = `.pos;
						if (enumIndex ` == 38) {
							var ` = `[0];
							if (` == "Kernel") {
								if (` == "is_binary") {
									if (`.length == 1) {
										var ` = `[0];
										{
											var arg = `;
											{
												@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
													var ` = arg.def;
													switch (enumIndex `) {
														case 22: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															{
																var target = `;
																var funcName = `;
																var a2 = `;
																if (funcName == "get" && a2 != null && a2.length >= 2) {
																	@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = target.def;
																		if (enumIndex ` == 38) {
																			var ` = `[0];
																			{
																				var m2 = `;
																				if (m2 == "Map") {
																					@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																						var ` = a2[1].def;
																						if (enumIndex ` == 32) {
																							var ` = `[0];
																							{
																								var s2 = `;
																								if (s2 == "id") {
																									a2[0];
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														};
														case 24: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															if (` == "get") {
																{
																	var mod = `;
																	var a = `;
																	if (a != null && a.length >= 2) {
																		@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = mod.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var m = `;
																					if (m == "Map") {
																						@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																							var ` = a[1].def;
																							if (enumIndex ` == 32) {
																								var ` = `[0];
																								{
																									var s = `;
																									if (s == "id") {
																										a[0];
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														};
														default: {
															null;
														}
													};
												};
											};
										};
									} else {
										null;
									};
								} else {
									null;
								};
							} else {
								null;
							};
						} else {
							null;
						};
					};
				};
				default: {
					null;
				}
			};
		};
	}

	static inline function isStringToIntegerOnMapGetId(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall({ def : EVar("String") }, "to_integer", [arg]) | ECall({ def : EVar("String") }, "to_integer", [arg]):
		isMapGetId(arg);	
	default:
		null;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 22: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (` == null) {
						null;
					} else {
						var ` = `.def;
						var ` = `.metadata;
						var ` = `.pos;
						if (enumIndex ` == 38) {
							var ` = `[0];
							if (` == "String") {
								if (` == "to_integer") {
									if (`.length == 1) {
										var ` = `[0];
										{
											var arg = `;
											{
												@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
													var ` = arg.def;
													switch (enumIndex `) {
														case 22: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															{
																var target = `;
																var funcName = `;
																var a2 = `;
																if (funcName == "get" && a2 != null && a2.length >= 2) {
																	@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = target.def;
																		if (enumIndex ` == 38) {
																			var ` = `[0];
																			{
																				var m2 = `;
																				if (m2 == "Map") {
																					@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																						var ` = a2[1].def;
																						if (enumIndex ` == 32) {
																							var ` = `[0];
																							{
																								var s2 = `;
																								if (s2 == "id") {
																									a2[0];
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														};
														case 24: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															if (` == "get") {
																{
																	var mod = `;
																	var a = `;
																	if (a != null && a.length >= 2) {
																		@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = mod.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var m = `;
																					if (m == "Map") {
																						@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																							var ` = a[1].def;
																							if (enumIndex ` == 32) {
																								var ` = `[0];
																								{
																									var s = `;
																									if (s == "id") {
																										a[0];
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														};
														default: {
															null;
														}
													};
												};
											};
										};
									} else {
										null;
									};
								} else {
									null;
								};
							} else {
								null;
							};
						} else {
							null;
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var ` = `.def;
						var ` = `.metadata;
						var ` = `.pos;
						if (enumIndex ` == 38) {
							var ` = `[0];
							if (` == "String") {
								if (` == "to_integer") {
									if (`.length == 1) {
										var ` = `[0];
										{
											var arg = `;
											{
												@:ast(switch (expr.def) {
	case ERemoteCall(mod, "get", a) if (a != null && a.length >= 2):
		switch (mod.def) {
			case EVar(m) if (m == "Map"):
				switch (a[1].def) {
					case EString(s) if (s == "id"):
						a[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	case ECall(target, funcName, a2) if (funcName == "get" && a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m2) if (m2 == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						a2[0];					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
													var ` = arg.def;
													switch (enumIndex `) {
														case 22: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															{
																var target = `;
																var funcName = `;
																var a2 = `;
																if (funcName == "get" && a2 != null && a2.length >= 2) {
																	@:ast(switch (target.def) {
	case EVar(m2) if (m2 == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				a2[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																		var ` = target.def;
																		if (enumIndex ` == 38) {
																			var ` = `[0];
																			{
																				var m2 = `;
																				if (m2 == "Map") {
																					@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		a2[0];	
	default:
		null;	
}) {
																						var ` = a2[1].def;
																						if (enumIndex ` == 32) {
																							var ` = `[0];
																							{
																								var s2 = `;
																								if (s2 == "id") {
																									a2[0];
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														};
														case 24: {
															var ` = `[0];
															var ` = `[1];
															var ` = `[2];
															if (` == "get") {
																{
																	var mod = `;
																	var a = `;
																	if (a != null && a.length >= 2) {
																		@:ast(switch (mod.def) {
	case EVar(m) if (m == "Map"):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				a[0];			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = mod.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var m = `;
																					if (m == "Map") {
																						@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		a[0];	
	default:
		null;	
}) {
																							var ` = a[1].def;
																							if (enumIndex ` == 32) {
																								var ` = `[0];
																								{
																									var s = `;
																									if (s == "id") {
																										a[0];
																									} else {
																										null;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														};
														default: {
															null;
														}
													};
												};
											};
										};
									} else {
										null;
									};
								} else {
									null;
								};
							} else {
								null;
							};
						} else {
							null;
						};
					};
				};
				default: {
					null;
				}
			};
		};
	}

	static function replaceMapGetReceiver(tree:reflaxe.elixir.ast.ElixirAST, newRecv:reflaxe.elixir.ast.ElixirAST) {
		return reflaxe.elixir.ast.ElixirASTTransformer.transformNode(tree, function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case ERemoteCall({ def : EVar("Map") }, "get", a) if (a != null && a.length >= 2):
		switch (a[1].def) {
			case EString(s) if (s == "id"):
				makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [newRecv, a[1]]), n.metadata, n.pos);			
			default:
				n;			
		};	
	case ECall(target, "get", a2) if (a2 != null && a2.length >= 2):
		switch (target.def) {
			case EVar(m) if (m == "Map"):
				switch (a2[1].def) {
					case EString(s2) if (s2 == "id"):
						makeASTWithMeta(ECall(target, "get", [newRecv, a2[1]]), n.metadata, n.pos);					
					default:
						n;					
				};			
			default:
				n;			
		};	
	default:
		n;	
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 22: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (` == "get") {
							{
								var target = `;
								var a2 = `;
								if (a2 != null && a2.length >= 2) {
									@:ast(switch (target.def) {
	case EVar(m) if (m == "Map"):
		switch (a2[1].def) {
			case EString(s2) if (s2 == "id"):
				makeASTWithMeta(ECall(target, "get", [newRecv, a2[1]]), n.metadata, n.pos);			
			default:
				n;			
		};	
	default:
		n;	
}) {
										var ` = target.def;
										if (enumIndex ` == 38) {
											var ` = `[0];
											{
												var m = `;
												if (m == "Map") {
													@:ast(switch (a2[1].def) {
	case EString(s2) if (s2 == "id"):
		makeASTWithMeta(ECall(target, "get", [newRecv, a2[1]]), n.metadata, n.pos);	
	default:
		n;	
}) {
														var ` = a2[1].def;
														if (enumIndex ` == 32) {
															var ` = `[0];
															{
																var s2 = `;
																if (s2 == "id") {
																	{def : reflaxe.elixir.ast.ElixirASTDef.ECall(target, "get", [newRecv, a2[1]]), metadata : n.metadata, pos : n.pos};
																} else {
																	n;
																};
															};
														} else {
															n;
														};
													};
												} else {
													n;
												};
											};
										} else {
											n;
										};
									};
								} else {
									n;
								};
							};
						} else {
							n;
						};
					};
					case 24: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						{
							var ` = `.def;
							var ` = `.metadata;
							var ` = `.pos;
							if (enumIndex ` == 38) {
								var ` = `[0];
								if (` == "Map") {
									if (` == "get") {
										{
											var a = `;
											if (a != null && a.length >= 2) {
												@:ast(switch (a[1].def) {
	case EString(s) if (s == "id"):
		makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [newRecv, a[1]]), n.metadata, n.pos);	
	default:
		n;	
}) {
													var ` = a[1].def;
													if (enumIndex ` == 32) {
														var ` = `[0];
														{
															var s = `;
															if (s == "id") {
																{def : reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																}, "get", [newRecv, a[1]]), metadata : n.metadata, pos : n.pos};
															} else {
																n;
															};
														};
													} else {
														n;
													};
												};
											} else {
												n;
											};
										};
									} else {
										n;
									};
								} else {
									n;
								};
							} else {
								n;
							};
						};
					};
					default: {
						n;
					}
				};
			};
		});
	}
}