class reflaxe.elixir.ast.transformers.ChangesetTransforms {

	@:value(0)
	static var debugCount:Int = 0;

	public static function normalizeChangesetPass(ast:reflaxe.elixir.ast.ElixirAST) {
		return reflaxe.elixir.ast.ElixirASTTransformer.transformNode(ast, function(node:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (node.def) {
	case EModule(modName, attrs, body):
		var usesChangeset = false;
		for (b  in  body) switch (b.def) {
			case EImport(m, _, _) if (m == "Ecto.Changeset"):
				usesChangeset = true;			
			default:
		};
		if (!usesChangeset) {
			function scan(x:ElixirAST):Void {
				if (usesChangeset || x == null || x.def == null) return;
				switch (x.def) {
					case ERemoteCall(m, _, as):
						switch (m.def) {
							case EVar(n) if (n == "Ecto.Changeset"):
								usesChangeset = true;							
							default:
						};
						scan(m);
						if (as != null) for (a  in  as) scan(a);					
					case EBlock(es):
						for (e  in  es) scan(e);					
					case EIf(c, t, e):
						scan(c);
						scan(t);
						if (e != null) scan(e);					
					case ECase(e, cs):
						scan(e);
						for (c  in  cs) {
							if (c.guard != null) scan(c.guard);
							scan(c.body);
						};					
					case EBinary(_, l, r):
						scan(l);
						scan(r);					
					case EMatch(_, rhs):
						scan(rhs);					
					case ECall(t, _, as2):
						if (t != null) scan(t);
						if (as2 != null) for (a  in  as2) scan(a);					
					default:
				};
			};
			for (b  in  body) scan(b);
		};
		if (!usesChangeset) node else {
			var declared = new Map<String,Bool>();
			reflaxe.elixir.ast.ASTUtils.walk(makeAST(EBlock(body)), function(n) {
				switch (n.def) {
					case EMatch(PVar(v), _):
						declared.set(v, true);					
					case EBinary(Match, left, _):
						function collect(lhs:ElixirAST) {
							switch (lhs.def) {
								case EVar(v):
									declared.set(v, true);								
								case EBinary(Match, l2, r2):
									collect(l2);
									collect(r2);								
								default:
							};
						};
						collect(left);					
					default:
				};
			});
			var binder = if (declared.exists("cs")) "cs" else if (declared.exists("_this2")) "_this2" else if (declared.exists("_this1")) "_this1" else if (declared.exists("this2")) "this2" else if (declared.exists("this1")) "this1" else "cs";
			function tx(n:ElixirAST):ElixirAST {
				return switch (n.def) {
					case EVar(v) if (isThisLike(v)):
						makeASTWithMeta(EVar(binder), n.metadata, n.pos);					
					case EVar(v) if (v == "cs" && binder != "cs"):
						makeASTWithMeta(EVar(binder), n.metadata, n.pos);					
					case EDef(name, params, guards, body):
						var newB = normalizeBody(body);
						makeASTWithMeta(EDef(name, params, guards, newB), n.metadata, n.pos);					
					case EDefp(name, params, guards, body):
						var newBp = normalizeBody(body);
						makeASTWithMeta(EDefp(name, params, guards, newBp), n.metadata, n.pos);					
					default:
						n;					
				};
			};
			var newBody = [for (b  in  body) ElixirASTTransformer.transformNode(b, tx)];
			makeASTWithMeta(EModule(modName, attrs, newBody), node.metadata, node.pos);
		};	
	case EDefmodule(modName, doBlock):
		var usesChangeset2 = false;
		function scanDefBlock(x:ElixirAST):Void {
			if (usesChangeset2 || x == null || x.def == null) return;
			switch (x.def) {
				case EImport(m, _, _) if (m == "Ecto.Changeset"):
					usesChangeset2 = true;				
				case ERemoteCall(m, _, as):
					switch (m.def) {
						case EVar(n) if (n == "Ecto.Changeset"):
							usesChangeset2 = true;						
						default:
					};
					scanDefBlock(m);
					if (as != null) for (a  in  as) scanDefBlock(a);				
				case EBlock(es):
					for (e  in  es) scanDefBlock(e);				
				case EIf(c, t, e):
					scanDefBlock(c);
					scanDefBlock(t);
					if (e != null) scanDefBlock(e);				
				case ECase(e, cs):
					scanDefBlock(e);
					for (c  in  cs) {
						if (c.guard != null) scanDefBlock(c.guard);
						scanDefBlock(c.body);
					};				
				case EBinary(_, l, r):
					scanDefBlock(l);
					scanDefBlock(r);				
				case EMatch(_, rhs):
					scanDefBlock(rhs);				
				case ECall(t, _, as2):
					if (t != null) scanDefBlock(t);
					if (as2 != null) for (a  in  as2) scanDefBlock(a);				
				default:
			};
		};
		scanDefBlock(doBlock);
		if (!usesChangeset2) node else {
			var declaredVars = new Map<String,Bool>();
			reflaxe.elixir.ast.ASTUtils.walk(doBlock, function(n) {
				switch (n.def) {
					case EMatch(PVar(v), _):
						declaredVars.set(v, true);					
					case EBinary(Match, left, _):
						function collectVarsFromLhs(lhs:ElixirAST) {
							switch (lhs.def) {
								case EVar(v):
									declaredVars.set(v, true);								
								case EBinary(Match, l2, r2):
									collectVarsFromLhs(l2);
									collectVarsFromLhs(r2);								
								default:
							};
						};
						collectVarsFromLhs(left);					
					default:
				};
			});
			var changesetBinder = if (declaredVars.exists("cs")) "cs" else if (declaredVars.exists("_this2")) "_this2" else if (declaredVars.exists("_this1")) "_this1" else if (declaredVars.exists("this2")) "this2" else if (declaredVars.exists("this1")) "this1" else "cs";
			function rewriteThisRefsToChangesetBinder(n:ElixirAST):ElixirAST {
				return switch (n.def) {
					case EVar(v) if (isThisLike(v)):
						makeASTWithMeta(EVar(changesetBinder), n.metadata, n.pos);					
					case EVar(v) if (v == "cs" && changesetBinder != "cs"):
						makeASTWithMeta(EVar(changesetBinder), n.metadata, n.pos);					
					case EDef(name, params, guards, body):
						var newB = normalizeBody(body);
						makeASTWithMeta(EDef(name, params, guards, newB), n.metadata, n.pos);					
					case EDefp(name, params, guards, body):
						var newBp = normalizeBody(body);
						makeASTWithMeta(EDefp(name, params, guards, newBp), n.metadata, n.pos);					
					default:
						n;					
				};
			};
			var newDo = ElixirASTTransformer.transformNode(doBlock, rewriteThisRefsToChangesetBinder);
			makeASTWithMeta(EDefmodule(modName, newDo), node.metadata, node.pos);
		};	
	case EDef(name, params, guards, body):
		var newBody = normalizeBody(body);
		makeASTWithMeta(EDef(name, params, guards, newBody), node.metadata, node.pos);	
	case EDefp(name, params, guards, body):
		var newBody = normalizeBody(body);
		makeASTWithMeta(EDefp(name, params, guards, newBody), node.metadata, node.pos);	
	default:
		node;	
}) {
				var ` = node.def;
				switch (enumIndex `) {
					case 0: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						{
							var modName = `;
							var attrs = `;
							var body = `;
							{
								var usesChangeset = [false];
								{
									var ` = 0;
									while (` < body.length) {
										var b = body[`];
										++ `;
										@:ast(switch (b.def) {
	case EImport(m, _, _) if (m == "Ecto.Changeset"):
		usesChangeset = true;	
	default:
}) {
											var ` = b.def;
											if (enumIndex ` == 45) {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var m = `;
													if (m == "Ecto.Changeset") {
														usesChangeset[0] = true;
													} else {};
												};
											} else {};
										};
									};
								};
								if (! usesChangeset[0]) {
									var scan = [null];
									scan[0] = function(x:reflaxe.elixir.ast.ElixirAST) {
										if (usesChangeset[0] || x == null || x.def == null) {
											return;
										};
										@:ast(switch (x.def) {
	case ERemoteCall(m, _, as):
		switch (m.def) {
			case EVar(n) if (n == "Ecto.Changeset"):
				usesChangeset = true;			
			default:
		};
		scan(m);
		if (as != null) for (a  in  as) scan(a);	
	case EBlock(es):
		for (e  in  es) scan(e);	
	case EIf(c, t, e):
		scan(c);
		scan(t);
		if (e != null) scan(e);	
	case ECase(e, cs):
		scan(e);
		for (c  in  cs) {
			if (c.guard != null) scan(c.guard);
			scan(c.body);
		};	
	case EBinary(_, l, r):
		scan(l);
		scan(r);	
	case EMatch(_, rhs):
		scan(rhs);	
	case ECall(t, _, as2):
		if (t != null) scan(t);
		if (as2 != null) for (a  in  as2) scan(a);	
	default:
}) {
											var ` = x.def;
											switch (enumIndex `) {
												case 6: {
													var ` = `[0];
													var ` = `[1];
													{
														var e = `;
														var cs = `;
														{
															scan[0](e);
															{
																var ` = 0;
																while (` < cs.length) {
																	var c = cs[`];
																	++ `;
																	if (c.guard != null) {
																		scan[0](c.guard);
																	};
																	scan[0](c.body);
																};
															};
														};
													};
												};
												case 8: {
													var ` = `[0];
													var ` = `[1];
													{
														var rhs = `;
														{
															scan[0](rhs);
														};
													};
												};
												case 10: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var c = `;
														var t = `;
														var e = `;
														{
															scan[0](c);
															scan[0](t);
															if (e != null) {
																scan[0](e);
															};
														};
													};
												};
												case 22: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var t = `;
														var as2 = `;
														{
															if (t != null) {
																scan[0](t);
															};
															if (as2 != null) {
																{
																	var ` = 0;
																	while (` < as2.length) {
																		var a = as2[`];
																		++ `;
																		scan[0](a);
																	};
																};
															};
														};
													};
												};
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var m = `;
														var as = `;
														{
															@:ast(switch (m.def) {
	case EVar(n) if (n == "Ecto.Changeset"):
		usesChangeset = true;	
	default:
}) {
																var ` = m.def;
																if (enumIndex ` == 38) {
																	var ` = `[0];
																	{
																		var n = `;
																		if (n == "Ecto.Changeset") {
																			usesChangeset[0] = true;
																		} else {};
																	};
																} else {};
															};
															scan[0](m);
															if (as != null) {
																{
																	var ` = 0;
																	while (` < as.length) {
																		var a = as[`];
																		++ `;
																		scan[0](a);
																	};
																};
															};
														};
													};
												};
												case 26: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var l = `;
														var r = `;
														{
															scan[0](l);
															scan[0](r);
														};
													};
												};
												case 53: {
													var ` = `[0];
													{
														var es = `;
														{
															{
																var ` = 0;
																while (` < es.length) {
																	var e = es[`];
																	++ `;
																	scan[0](e);
																};
															};
														};
													};
												};
												default: {}
											};
										};
									};
									{
										var ` = 0;
										while (` < body.length) {
											var b = body[`];
											++ `;
											scan[0](b);
										};
									};
								};
								if (! usesChangeset[0]) {
									node;
								} else {
									var declared = {
										{};
										new haxe.ds.StringMap();
									};
									reflaxe.elixir.ast.ASTUtils.walk({
										var pos = null;
										{def : reflaxe.elixir.ast.ElixirASTDef.EBlock(body), metadata : {}, pos : pos};
									}, function(n:reflaxe.elixir.ast.ElixirAST) {
										@:ast(switch (n.def) {
	case EMatch(PVar(v), _):
		declared.set(v, true);	
	case EBinary(Match, left, _):
		function collect(lhs:ElixirAST) {
			switch (lhs.def) {
				case EVar(v):
					declared.set(v, true);				
				case EBinary(Match, l2, r2):
					collect(l2);
					collect(r2);				
				default:
			};
		};
		collect(left);	
	default:
}) {
											var ` = n.def;
											switch (enumIndex `) {
												case 8: {
													var ` = `[0];
													var ` = `[1];
													if (enumIndex ` == 0) {
														var ` = `[0];
														{
															var v = `;
															{
																{
																	declared.set(v, true);
																};
															};
														};
													} else {};
												};
												case 26: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													if (enumIndex ` == 27) {
														{
															var left = `;
															{
																var collect = [null];
																collect[0] = function(lhs:reflaxe.elixir.ast.ElixirAST) {
																	@:ast(switch (lhs.def) {
	case EVar(v):
		declared.set(v, true);	
	case EBinary(Match, l2, r2):
		collect(l2);
		collect(r2);	
	default:
}) {
																		var ` = lhs.def;
																		switch (enumIndex `) {
																			case 26: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				if (enumIndex ` == 27) {
																					{
																						var l2 = `;
																						var r2 = `;
																						{
																							collect[0](l2);
																							collect[0](r2);
																						};
																					};
																				} else {};
																			};
																			case 38: {
																				var ` = `[0];
																				{
																					var v = `;
																					{
																						{
																							declared.set(v, true);
																						};
																					};
																				};
																			};
																			default: {}
																		};
																	};
																};
																collect[0](left);
															};
														};
													} else {};
												};
												default: {}
											};
										};
									});
									var binder = if (declared.exists("cs")) {
										"cs";
									} else {
										if (declared.exists("_this2")) {
											"_this2";
										} else {
											if (declared.exists("_this1")) {
												"_this1";
											} else {
												if (declared.exists("this2")) {
													"this2";
												} else {
													if (declared.exists("this1")) {
														"this1";
													} else {
														"cs";
													};
												};
											};
										};
									};
									var tx = function(n:reflaxe.elixir.ast.ElixirAST) {
										return @:ast(switch (n.def) {
	case EVar(v) if (isThisLike(v)):
		makeASTWithMeta(EVar(binder), n.metadata, n.pos);	
	case EVar(v) if (v == "cs" && binder != "cs"):
		makeASTWithMeta(EVar(binder), n.metadata, n.pos);	
	case EDef(name, params, guards, body):
		var newB = normalizeBody(body);
		makeASTWithMeta(EDef(name, params, guards, newB), n.metadata, n.pos);	
	case EDefp(name, params, guards, body):
		var newBp = normalizeBody(body);
		makeASTWithMeta(EDefp(name, params, guards, newBp), n.metadata, n.pos);	
	default:
		n;	
}) {
											var ` = n.def;
											switch (enumIndex `) {
												case 2: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													var ` = `[3];
													{
														var name = `;
														var params = `;
														var guards = `;
														var body = `;
														{
															var newB = reflaxe.elixir.ast.transformers.ChangesetTransforms.normalizeBody(body);
															{def : reflaxe.elixir.ast.ElixirASTDef.EDef(name, params, guards, newB), metadata : n.metadata, pos : n.pos};
														};
													};
												};
												case 3: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													var ` = `[3];
													{
														var name = `;
														var params = `;
														var guards = `;
														var body = `;
														{
															var newBp = reflaxe.elixir.ast.transformers.ChangesetTransforms.normalizeBody(body);
															{def : reflaxe.elixir.ast.ElixirASTDef.EDefp(name, params, guards, newBp), metadata : n.metadata, pos : n.pos};
														};
													};
												};
												case 38: {
													var ` = `[0];
													{
														var v = `;
														if (v == "this" || v == "this1" || v == "this2" || v == "_this1" || v == "_this2") {
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar(binder), metadata : n.metadata, pos : n.pos};
														} else {
															var v = `;
															if (v == "cs" && binder != "cs") {
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar(binder), metadata : n.metadata, pos : n.pos};
															} else {
																n;
															};
														};
													};
												};
												default: {
													n;
												}
											};
										};
									};
									var newBody = {
										var ` = [];
										{
											var ` = 0;
											while (` < body.length) {
												var b = body[`];
												++ `;
												`.push(reflaxe.elixir.ast.ElixirASTTransformer.transformNode(b, tx));
											};
										};
										`;
									};
									{def : reflaxe.elixir.ast.ElixirASTDef.EModule(modName, attrs, newBody), metadata : node.metadata, pos : node.pos};
								};
							};
						};
					};
					case 1: {
						var ` = `[0];
						var ` = `[1];
						{
							var modName = `;
							var doBlock = `;
							{
								var usesChangeset2 = [false];
								var scanDefBlock = [null];
								scanDefBlock[0] = function(x:reflaxe.elixir.ast.ElixirAST) {
									if (usesChangeset2[0] || x == null || x.def == null) {
										return;
									};
									@:ast(switch (x.def) {
	case EImport(m, _, _) if (m == "Ecto.Changeset"):
		usesChangeset2 = true;	
	case ERemoteCall(m, _, as):
		switch (m.def) {
			case EVar(n) if (n == "Ecto.Changeset"):
				usesChangeset2 = true;			
			default:
		};
		scanDefBlock(m);
		if (as != null) for (a  in  as) scanDefBlock(a);	
	case EBlock(es):
		for (e  in  es) scanDefBlock(e);	
	case EIf(c, t, e):
		scanDefBlock(c);
		scanDefBlock(t);
		if (e != null) scanDefBlock(e);	
	case ECase(e, cs):
		scanDefBlock(e);
		for (c  in  cs) {
			if (c.guard != null) scanDefBlock(c.guard);
			scanDefBlock(c.body);
		};	
	case EBinary(_, l, r):
		scanDefBlock(l);
		scanDefBlock(r);	
	case EMatch(_, rhs):
		scanDefBlock(rhs);	
	case ECall(t, _, as2):
		if (t != null) scanDefBlock(t);
		if (as2 != null) for (a  in  as2) scanDefBlock(a);	
	default:
}) {
										var ` = x.def;
										switch (enumIndex `) {
											case 6: {
												var ` = `[0];
												var ` = `[1];
												{
													var e = `;
													var cs = `;
													{
														scanDefBlock[0](e);
														{
															var ` = 0;
															while (` < cs.length) {
																var c = cs[`];
																++ `;
																if (c.guard != null) {
																	scanDefBlock[0](c.guard);
																};
																scanDefBlock[0](c.body);
															};
														};
													};
												};
											};
											case 8: {
												var ` = `[0];
												var ` = `[1];
												{
													var rhs = `;
													{
														scanDefBlock[0](rhs);
													};
												};
											};
											case 10: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var c = `;
													var t = `;
													var e = `;
													{
														scanDefBlock[0](c);
														scanDefBlock[0](t);
														if (e != null) {
															scanDefBlock[0](e);
														};
													};
												};
											};
											case 22: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var t = `;
													var as2 = `;
													{
														if (t != null) {
															scanDefBlock[0](t);
														};
														if (as2 != null) {
															{
																var ` = 0;
																while (` < as2.length) {
																	var a = as2[`];
																	++ `;
																	scanDefBlock[0](a);
																};
															};
														};
													};
												};
											};
											case 24: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var m = `;
													var as = `;
													{
														@:ast(switch (m.def) {
	case EVar(n) if (n == "Ecto.Changeset"):
		usesChangeset2 = true;	
	default:
}) {
															var ` = m.def;
															if (enumIndex ` == 38) {
																var ` = `[0];
																{
																	var n = `;
																	if (n == "Ecto.Changeset") {
																		usesChangeset2[0] = true;
																	} else {};
																};
															} else {};
														};
														scanDefBlock[0](m);
														if (as != null) {
															{
																var ` = 0;
																while (` < as.length) {
																	var a = as[`];
																	++ `;
																	scanDefBlock[0](a);
																};
															};
														};
													};
												};
											};
											case 26: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var l = `;
													var r = `;
													{
														scanDefBlock[0](l);
														scanDefBlock[0](r);
													};
												};
											};
											case 45: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var m = `;
													if (m == "Ecto.Changeset") {
														usesChangeset2[0] = true;
													} else {};
												};
											};
											case 53: {
												var ` = `[0];
												{
													var es = `;
													{
														{
															var ` = 0;
															while (` < es.length) {
																var e = es[`];
																++ `;
																scanDefBlock[0](e);
															};
														};
													};
												};
											};
											default: {}
										};
									};
								};
								scanDefBlock[0](doBlock);
								if (! usesChangeset2[0]) {
									node;
								} else {
									var declaredVars = {
										{};
										new haxe.ds.StringMap();
									};
									reflaxe.elixir.ast.ASTUtils.walk(doBlock, function(n:reflaxe.elixir.ast.ElixirAST) {
										@:ast(switch (n.def) {
	case EMatch(PVar(v), _):
		declaredVars.set(v, true);	
	case EBinary(Match, left, _):
		function collectVarsFromLhs(lhs:ElixirAST) {
			switch (lhs.def) {
				case EVar(v):
					declaredVars.set(v, true);				
				case EBinary(Match, l2, r2):
					collectVarsFromLhs(l2);
					collectVarsFromLhs(r2);				
				default:
			};
		};
		collectVarsFromLhs(left);	
	default:
}) {
											var ` = n.def;
											switch (enumIndex `) {
												case 8: {
													var ` = `[0];
													var ` = `[1];
													if (enumIndex ` == 0) {
														var ` = `[0];
														{
															var v = `;
															{
																{
																	declaredVars.set(v, true);
																};
															};
														};
													} else {};
												};
												case 26: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													if (enumIndex ` == 27) {
														{
															var left = `;
															{
																var collectVarsFromLhs = [null];
																collectVarsFromLhs[0] = function(lhs:reflaxe.elixir.ast.ElixirAST) {
																	@:ast(switch (lhs.def) {
	case EVar(v):
		declaredVars.set(v, true);	
	case EBinary(Match, l2, r2):
		collectVarsFromLhs(l2);
		collectVarsFromLhs(r2);	
	default:
}) {
																		var ` = lhs.def;
																		switch (enumIndex `) {
																			case 26: {
																				var ` = `[0];
																				var ` = `[1];
																				var ` = `[2];
																				if (enumIndex ` == 27) {
																					{
																						var l2 = `;
																						var r2 = `;
																						{
																							collectVarsFromLhs[0](l2);
																							collectVarsFromLhs[0](r2);
																						};
																					};
																				} else {};
																			};
																			case 38: {
																				var ` = `[0];
																				{
																					var v = `;
																					{
																						{
																							declaredVars.set(v, true);
																						};
																					};
																				};
																			};
																			default: {}
																		};
																	};
																};
																collectVarsFromLhs[0](left);
															};
														};
													} else {};
												};
												default: {}
											};
										};
									});
									var changesetBinder = if (declaredVars.exists("cs")) {
										"cs";
									} else {
										if (declaredVars.exists("_this2")) {
											"_this2";
										} else {
											if (declaredVars.exists("_this1")) {
												"_this1";
											} else {
												if (declaredVars.exists("this2")) {
													"this2";
												} else {
													if (declaredVars.exists("this1")) {
														"this1";
													} else {
														"cs";
													};
												};
											};
										};
									};
									var rewriteThisRefsToChangesetBinder = function(n:reflaxe.elixir.ast.ElixirAST) {
										return @:ast(switch (n.def) {
	case EVar(v) if (isThisLike(v)):
		makeASTWithMeta(EVar(changesetBinder), n.metadata, n.pos);	
	case EVar(v) if (v == "cs" && changesetBinder != "cs"):
		makeASTWithMeta(EVar(changesetBinder), n.metadata, n.pos);	
	case EDef(name, params, guards, body):
		var newB = normalizeBody(body);
		makeASTWithMeta(EDef(name, params, guards, newB), n.metadata, n.pos);	
	case EDefp(name, params, guards, body):
		var newBp = normalizeBody(body);
		makeASTWithMeta(EDefp(name, params, guards, newBp), n.metadata, n.pos);	
	default:
		n;	
}) {
											var ` = n.def;
											switch (enumIndex `) {
												case 2: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													var ` = `[3];
													{
														var name = `;
														var params = `;
														var guards = `;
														var body = `;
														{
															var newB = reflaxe.elixir.ast.transformers.ChangesetTransforms.normalizeBody(body);
															{def : reflaxe.elixir.ast.ElixirASTDef.EDef(name, params, guards, newB), metadata : n.metadata, pos : n.pos};
														};
													};
												};
												case 3: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													var ` = `[3];
													{
														var name = `;
														var params = `;
														var guards = `;
														var body = `;
														{
															var newBp = reflaxe.elixir.ast.transformers.ChangesetTransforms.normalizeBody(body);
															{def : reflaxe.elixir.ast.ElixirASTDef.EDefp(name, params, guards, newBp), metadata : n.metadata, pos : n.pos};
														};
													};
												};
												case 38: {
													var ` = `[0];
													{
														var v = `;
														if (v == "this" || v == "this1" || v == "this2" || v == "_this1" || v == "_this2") {
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar(changesetBinder), metadata : n.metadata, pos : n.pos};
														} else {
															var v = `;
															if (v == "cs" && changesetBinder != "cs") {
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar(changesetBinder), metadata : n.metadata, pos : n.pos};
															} else {
																n;
															};
														};
													};
												};
												default: {
													n;
												}
											};
										};
									};
									var newDo = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(doBlock, rewriteThisRefsToChangesetBinder);
									{def : reflaxe.elixir.ast.ElixirASTDef.EDefmodule(modName, newDo), metadata : node.metadata, pos : node.pos};
								};
							};
						};
					};
					case 2: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						var ` = `[3];
						{
							var name = `;
							var params = `;
							var guards = `;
							var body = `;
							{
								var newBody = reflaxe.elixir.ast.transformers.ChangesetTransforms.normalizeBody(body);
								{def : reflaxe.elixir.ast.ElixirASTDef.EDef(name, params, guards, newBody), metadata : node.metadata, pos : node.pos};
							};
						};
					};
					case 3: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						var ` = `[3];
						{
							var name = `;
							var params = `;
							var guards = `;
							var body = `;
							{
								var newBody = reflaxe.elixir.ast.transformers.ChangesetTransforms.normalizeBody(body);
								{def : reflaxe.elixir.ast.ElixirASTDef.EDefp(name, params, guards, newBody), metadata : node.metadata, pos : node.pos};
							};
						};
					};
					default: {
						node;
					}
				};
			};
		});
	}

	public static function normalizeValidateFieldAtomPass(ast:reflaxe.elixir.ast.ElixirAST) {
		var normalizeFieldArg = function(arg:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (arg.def) {
	case ERemoteCall({ def : EVar(m) }, f, [fld]) if (m == "String" && f == "to_atom"):
		switch (fld.def) {
			case EString(s):
				makeAST(EAtom(s));			
			default:
				arg;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [fld]) if (m == "String" && f == "to_existing_atom"):
		switch (fld.def) {
			case EString(s):
				makeAST(EAtom(s));			
			default:
				arg;			
		};	
	case ERemoteCall({ def : EVar(m1) }, f1, [{ def : ECall(null, f2, [inner]) }]) if (m1 == "String" && (f1 == "to_existing_atom" || f1 == "to_atom") && f2 == "Macro.underscore"):
		switch (inner.def) {
			case EString(s):
				makeAST(EAtom(s));			
			default:
				arg;			
		};	
	case EString(s):
		makeAST(EAtom(s));	
	default:
		arg;	
}) {
				var ` = arg.def;
				switch (enumIndex `) {
					case 24: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						{
							var ` = `.def;
							var ` = `.metadata;
							var ` = `.pos;
							if (enumIndex ` == 38) {
								var ` = `[0];
								if (`.length == 1) {
									var ` = `[0];
									{
										var fld = `;
										var f = `;
										var m = `;
										if (m == "String" && f == "to_atom") {
											@:ast(switch (fld.def) {
	case EString(s):
		makeAST(EAtom(s));	
	default:
		arg;	
}) {
												var ` = fld.def;
												if (enumIndex ` == 32) {
													var ` = `[0];
													{
														var s = `;
														{
															{
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															};
														};
													};
												} else {
													arg;
												};
											};
										} else {
											var fld = `;
											var f = `;
											var m = `;
											if (m == "String" && f == "to_existing_atom") {
												@:ast(switch (fld.def) {
	case EString(s):
		makeAST(EAtom(s));	
	default:
		arg;	
}) {
													var ` = fld.def;
													if (enumIndex ` == 32) {
														var ` = `[0];
														{
															var s = `;
															{
																{
																	var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																		var this;
																		this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
																		cast this;
																	});
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																};
															};
														};
													} else {
														arg;
													};
												};
											} else {
												var ` = `.def;
												var ` = `.metadata;
												var ` = `.pos;
												if (enumIndex ` == 22) {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													if (` == null) if (`.length == 1) {
														var ` = `[0];
														{
															var inner = `;
															var f2 = `;
															var f1 = `;
															var m1 = `;
															if (m1 == "String" && (f1 == "to_existing_atom" || f1 == "to_atom") && f2 == "Macro.underscore") {
																@:ast(switch (inner.def) {
	case EString(s):
		makeAST(EAtom(s));	
	default:
		arg;	
}) {
																	var ` = inner.def;
																	if (enumIndex ` == 32) {
																		var ` = `[0];
																		{
																			var s = `;
																			{
																				{
																					var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																						var this;
																						this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
																						cast this;
																					});
																					var pos = null;
																					{def : def, metadata : {}, pos : pos};
																				};
																			};
																		};
																	} else {
																		arg;
																	};
																};
															} else {
																arg;
															};
														};
													} else {
														arg;
													} else {
														arg;
													};
												} else {
													arg;
												};
											};
										};
									};
								} else {
									arg;
								};
							} else {
								arg;
							};
						};
					};
					case 32: {
						var ` = `[0];
						{
							var s = `;
							{
								{
									var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
										var this;
										this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
										cast this;
									});
									var pos = null;
									{def : def, metadata : {}, pos : pos};
								};
							};
						};
					};
					default: {
						arg;
					}
				};
			};
		};
		var normalizeFieldsList = function(arg:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (arg.def) {
	case EList(elements):
		var out = [];
		for (e  in  elements) {
			switch (e.def) {
				case EString(s):
					out.push(makeAST(EAtom(s)));				
				case EAtom(_):
					out.push(e);				
				default:
					out.push(e);				
			};
		};
		makeAST(EList(out));	
	case ERemoteCall({ def : EVar(m) }, f, [listExpr, funExpr]) if (m == "Enum" && f == "map"):
		var isStringToAtomCapture = false;
		switch (funExpr.def) {
			case ECapture(inner, _):
				switch (inner.def) {
					case ERemoteCall({ def : EVar(m2) }, f2, _):
						if (m2 == "String" && (f2 == "to_atom" || f2 == "to_existing_atom")) isStringToAtomCapture = true;					
					case EField({ def : EVar(cls) }, meth) if (cls == "String" && (meth == "to_atom" || meth == "to_existing_atom")):
						isStringToAtomCapture = true;					
					default:
				};			
			default:
		};
		if (isStringToAtomCapture) {
			switch (listExpr.def) {
				case EList(elements2):
					var out2 = [];
					for (e2  in  elements2) {
						switch (e2.def) {
							case EString(s2):
								out2.push(makeAST(EAtom(s2)));							
							case EAtom(_):
								out2.push(e2);							
							default:
								out2.push(e2);							
						};
					};
					makeAST(EList(out2));				
				default:
					arg;				
			};
		} else arg;	
	default:
		arg;	
}) {
				var ` = arg.def;
				switch (enumIndex `) {
					case 15: {
						var ` = `[0];
						{
							var elements = `;
							{
								var out = [];
								{
									var ` = 0;
									while (` < elements.length) {
										var e = elements[`];
										++ `;
										@:ast(switch (e.def) {
	case EString(s):
		out.push(makeAST(EAtom(s)));	
	case EAtom(_):
		out.push(e);	
	default:
		out.push(e);	
}) {
											var ` = e.def;
											switch (enumIndex `) {
												case 31: {
													var ` = `[0];
													{
														out.push(e);
													};
												};
												case 32: {
													var ` = `[0];
													{
														var s = `;
														{
															out.push({
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															});
														};
													};
												};
												default: {
													out.push(e);
												}
											};
										};
									};
								};
								{
									var pos = null;
									{def : reflaxe.elixir.ast.ElixirASTDef.EList(out), metadata : {}, pos : pos};
								};
							};
						};
					};
					case 24: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						{
							var ` = `.def;
							var ` = `.metadata;
							var ` = `.pos;
							if (enumIndex ` == 38) {
								var ` = `[0];
								if (`.length == 2) {
									var ` = `[0];
									var ` = `[1];
									{
										var listExpr = `;
										var funExpr = `;
										var f = `;
										var m = `;
										if (m == "Enum" && f == "map") {
											var isStringToAtomCapture = false;
											@:ast(switch (funExpr.def) {
	case ECapture(inner, _):
		switch (inner.def) {
			case ERemoteCall({ def : EVar(m2) }, f2, _):
				if (m2 == "String" && (f2 == "to_atom" || f2 == "to_existing_atom")) isStringToAtomCapture = true;			
			case EField({ def : EVar(cls) }, meth) if (cls == "String" && (meth == "to_atom" || meth == "to_existing_atom")):
				isStringToAtomCapture = true;			
			default:
		};	
	default:
}) {
												var ` = funExpr.def;
												if (enumIndex ` == 43) {
													var ` = `[0];
													var ` = `[1];
													{
														var inner = `;
														{
															@:ast(switch (inner.def) {
	case ERemoteCall({ def : EVar(m2) }, f2, _):
		if (m2 == "String" && (f2 == "to_atom" || f2 == "to_existing_atom")) isStringToAtomCapture = true;	
	case EField({ def : EVar(cls) }, meth) if (cls == "String" && (meth == "to_atom" || meth == "to_existing_atom")):
		isStringToAtomCapture = true;	
	default:
}) {
																var ` = inner.def;
																switch (enumIndex `) {
																	case 24: {
																		var ` = `[0];
																		var ` = `[1];
																		var ` = `[2];
																		{
																			var ` = `.def;
																			var ` = `.metadata;
																			var ` = `.pos;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var m2 = `;
																					var f2 = `;
																					{
																						if (m2 == "String" && (f2 == "to_atom" || f2 == "to_existing_atom")) {
																							isStringToAtomCapture = true;
																						};
																					};
																				};
																			} else {};
																		};
																	};
																	case 28: {
																		var ` = `[0];
																		var ` = `[1];
																		{
																			var ` = `.def;
																			var ` = `.metadata;
																			var ` = `.pos;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var cls = `;
																					var meth = `;
																					if (cls == "String" && (meth == "to_atom" || meth == "to_existing_atom")) {
																						isStringToAtomCapture = true;
																					} else {};
																				};
																			} else {};
																		};
																	};
																	default: {}
																};
															};
														};
													};
												} else {};
											};
											if (isStringToAtomCapture) {
												@:ast(switch (listExpr.def) {
	case EList(elements2):
		var out2 = [];
		for (e2  in  elements2) {
			switch (e2.def) {
				case EString(s2):
					out2.push(makeAST(EAtom(s2)));				
				case EAtom(_):
					out2.push(e2);				
				default:
					out2.push(e2);				
			};
		};
		makeAST(EList(out2));	
	default:
		arg;	
}) {
													var ` = listExpr.def;
													if (enumIndex ` == 15) {
														var ` = `[0];
														{
															var elements2 = `;
															{
																var out2 = [];
																{
																	var ` = 0;
																	while (` < elements2.length) {
																		var e2 = elements2[`];
																		++ `;
																		@:ast(switch (e2.def) {
	case EString(s2):
		out2.push(makeAST(EAtom(s2)));	
	case EAtom(_):
		out2.push(e2);	
	default:
		out2.push(e2);	
}) {
																			var ` = e2.def;
																			switch (enumIndex `) {
																				case 31: {
																					var ` = `[0];
																					{
																						out2.push(e2);
																					};
																				};
																				case 32: {
																					var ` = `[0];
																					{
																						var s2 = `;
																						{
																							out2.push({
																								var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																									var this;
																									this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s2);
																									cast this;
																								});
																								var pos = null;
																								{def : def, metadata : {}, pos : pos};
																							});
																						};
																					};
																				};
																				default: {
																					out2.push(e2);
																				}
																			};
																		};
																	};
																};
																{
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EList(out2), metadata : {}, pos : pos};
																};
															};
														};
													} else {
														arg;
													};
												};
											} else {
												arg;
											};
										} else {
											arg;
										};
									};
								} else {
									arg;
								};
							} else {
								arg;
							};
						};
					};
					default: {
						arg;
					}
				};
			};
		};
		var rewriteNilComparisons = function(n:reflaxe.elixir.ast.ElixirAST) {
			{};
			return @:ast(switch (n.def) {
	case EBinary(Equal, l, r):
		switch [isOptsField(l), r.def, isOptsField(r), l.def] {
			case [f, ENil, _, _] if (f != null):
				makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));			
			case [_, _, f2, ENil] if (f2 != null):
				makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));			
			default:
				n;			
		};	
	case EBinary(NotEqual, l2, r2):
		switch [isOptsField(l2), r2.def, isOptsField(r2), l2.def] {
			case [f, ENil, _, _] if (f != null):
				var inner = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));
				makeAST(ElixirASTDef.EUnary(Not, inner));			
			case [_, _, f2, ENil] if (f2 != null):
				var inner2 = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));
				makeAST(ElixirASTDef.EUnary(Not, inner2));			
			default:
				n;			
		};	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 26) {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					switch (enumIndex `) {
						case 6: {
							{
								var l = `;
								var r = `;
								{
									@:ast(switch [isOptsField(l), r.def, isOptsField(r), l.def] {
	case [f, ENil, _, _] if (f != null):
		makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));	
	case [_, _, f2, ENil] if (f2 != null):
		makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));	
	default:
		n;	
}) {
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = l.def;
											switch (enumIndex `) {
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = r.def;
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = r.def;
											switch (enumIndex `) {
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = l.def;
										if (enumIndex ` == 36) {
											{
												var f = `;
												if (f != null) {
													{
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
												} else if (enumIndex ` == 36) {
													{
														var f2 = `;
														if (f2 != null) {
															{
																var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																}, "is_nil", [{
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																	}, "get", [{
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																	}, {
																		var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																			var this;
																			this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																			cast this;
																		});
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																}]);
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															};
														} else {
															n;
														};
													};
												} else {
													n;
												};
											};
										} else if (enumIndex ` == 36) {
											{
												var f2 = `;
												if (f2 != null) {
													{
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
												} else {
													n;
												};
											};
										} else {
											n;
										};
									};
								};
							};
						};
						case 7: {
							{
								var l2 = `;
								var r2 = `;
								{
									@:ast(switch [isOptsField(l2), r2.def, isOptsField(r2), l2.def] {
	case [f, ENil, _, _] if (f != null):
		var inner = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));
		makeAST(ElixirASTDef.EUnary(Not, inner));	
	case [_, _, f2, ENil] if (f2 != null):
		var inner2 = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));
		makeAST(ElixirASTDef.EUnary(Not, inner2));	
	default:
		n;	
}) {
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = l2.def;
											switch (enumIndex `) {
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = r2.def;
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = r2.def;
											switch (enumIndex `) {
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = l2.def;
										if (enumIndex ` == 36) {
											{
												var f = `;
												if (f != null) {
													var inner = {
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
													{
														var pos = null;
														{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner), metadata : {}, pos : pos};
													};
												} else if (enumIndex ` == 36) {
													{
														var f2 = `;
														if (f2 != null) {
															var inner2 = {
																var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																}, "is_nil", [{
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																	}, "get", [{
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																	}, {
																		var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																			var this;
																			this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																			cast this;
																		});
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																}]);
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															};
															{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner2), metadata : {}, pos : pos};
															};
														} else {
															n;
														};
													};
												} else {
													n;
												};
											};
										} else if (enumIndex ` == 36) {
											{
												var f2 = `;
												if (f2 != null) {
													var inner2 = {
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
													{
														var pos = null;
														{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner2), metadata : {}, pos : pos};
													};
												} else {
													n;
												};
											};
										} else {
											n;
										};
									};
								};
							};
						};
						default: {
							n;
						}
					};
				} else {
					n;
				};
			};
		};
		var rewrite = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case ERemoteCall(mod, fn, args) if (isChangeset(mod) && (fn == "validate_required" || fn == "validate_length")):
		var a = args.copy();
		if (a.length >= 2) {
			if (fn == "validate_required") {
				a[1] = normalizeFieldsList(a[1]);
			} else {
				a[1] = normalizeFieldArg(a[1]);
			};
		};
		makeASTWithMeta(ERemoteCall(mod, fn, a), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 24) {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						var args = `;
						if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
							var ` = mod.def;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var name = `;
									{
										name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
									};
								};
							} else {
								false;
							};
						} && (fn == "validate_required" || fn == "validate_length")) {
							var a = args.copy();
							if (a.length >= 2) {
								if (fn == "validate_required") {
									a[1] = normalizeFieldsList(a[1]);
								} else {
									a[1] = normalizeFieldArg(a[1]);
								};
							};
							{def : reflaxe.elixir.ast.ElixirASTDef.ERemoteCall(mod, fn, a), metadata : n.metadata, pos : n.pos};
						} else {
							n;
						};
					};
				} else {
					n;
				};
			};
		};
		return reflaxe.elixir.ast.ElixirASTTransformer.transformNode(ast, rewrite);
	}

	static function normalizeBody(body:reflaxe.elixir.ast.ElixirAST) {
		var isSimpleExpr = @:ast(switch (body.def) {
	case EBlock(_) | EDo(_) | EIf(_, _, _) | ECase(_, _) | ECond(_):
		false;	
	case EBinary(Match, _, _) | EMatch(_, _):
		false;	
	default:
		true;	
}) {
			var ` = body.def;
			switch (enumIndex `) {
				case 6: {
					var ` = `[0];
					var ` = `[1];
					{
						false;
					};
				};
				case 7: {
					var ` = `[0];
					{
						false;
					};
				};
				case 8: {
					var ` = `[0];
					var ` = `[1];
					{
						false;
					};
				};
				case 10: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						false;
					};
				};
				case 26: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (enumIndex ` == 27) {
						{
							false;
						};
					} else {
						true;
					};
				};
				case 53: {
					var ` = `[0];
					{
						false;
					};
				};
				case 55: {
					var ` = `[0];
					{
						false;
					};
				};
				default: {
					true;
				}
			};
		};
		if (isSimpleExpr && reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangesetCallsDetect(body)) {
			return body;
		};
		@:ast(switch (body.def) {
	case EBlock(stmts) if (stmts.length == 1):
		var only = stmts[0];
		var onlySimple = switch (only.def) {
			case EBlock(_) | EDo(_) | EIf(_, _, _) | ECase(_, _) | ECond(_) | EBinary(Match, _, _) | EMatch(_, _):
				false;			
			default:
				true;			
		};
		if (onlySimple && containsChangesetCallsDetect(only)) return only;	
	default:
}) {
			var ` = body.def;
			if (enumIndex ` == 53) {
				var ` = `[0];
				{
					var stmts = `;
					if (stmts.length == 1) {
						var only = stmts[0];
						var onlySimple = @:ast(switch (only.def) {
	case EBlock(_) | EDo(_) | EIf(_, _, _) | ECase(_, _) | ECond(_) | EBinary(Match, _, _) | EMatch(_, _):
		false;	
	default:
		true;	
}) {
							var ` = only.def;
							switch (enumIndex `) {
								case 6: {
									var ` = `[0];
									var ` = `[1];
									{
										false;
									};
								};
								case 7: {
									var ` = `[0];
									{
										false;
									};
								};
								case 8: {
									var ` = `[0];
									var ` = `[1];
									{
										false;
									};
								};
								case 10: {
									var ` = `[0];
									var ` = `[1];
									var ` = `[2];
									{
										false;
									};
								};
								case 26: {
									var ` = `[0];
									var ` = `[1];
									var ` = `[2];
									if (enumIndex ` == 27) {
										{
											false;
										};
									} else {
										true;
									};
								};
								case 53: {
									var ` = `[0];
									{
										false;
									};
								};
								case 55: {
									var ` = `[0];
									{
										false;
									};
								};
								default: {
									true;
								}
							};
						};
						if (onlySimple && reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangesetCallsDetect(only)) {
							return only;
						};
					} else {};
				};
			} else {};
		};
		var lhsAllWildcards = [null];
		lhsAllWildcards[0] = function(lhs:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (lhs.def) {
	case EVar(v) if (v == "_" || (v != null && v.length > 1 && v.charAt(0) == "_")):
		true;	
	case EBinary(Match, l2, r2):
		lhsAllWildcards(l2) || lhsAllWildcards(r2);	
	default:
		false;	
}) {
				var ` = lhs.def;
				switch (enumIndex `) {
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var l2 = `;
								var r2 = `;
								{
									lhsAllWildcards[0](l2) || lhsAllWildcards[0](r2);
								};
							};
						} else {
							false;
						};
					};
					case 38: {
						var ` = `[0];
						{
							var v = `;
							if (v == "_" || (v != null && v.length > 1 && v.charAt(0) == "_")) {
								true;
							} else {
								false;
							};
						};
					};
					default: {
						false;
					}
				};
			};
		};
		var patternAllWildcards = [null];
		patternAllWildcards[0] = function(p:reflaxe.elixir.ast.EPattern) {
			return @:ast(switch (p) {
	case PVar(n) if (n == "_" || (n != null && n.length > 1 && n.charAt(0) == "_")):
		true;	
	case PTuple(es):
		var any = false;
		for (e  in  es) any = any || patternAllWildcards(e);
		any;	
	case PList(es):
		var any2 = false;
		for (e  in  es) any2 = any2 || patternAllWildcards(e);
		any2;	
	case PCons(h, t):
		patternAllWildcards(h) || patternAllWildcards(t);	
	default:
		false;	
}) switch (enumIndex p) {
				case 0: {
					var ` = p[0];
					{
						var n = `;
						if (n == "_" || (n != null && n.length > 1 && n.charAt(0) == "_")) {
							true;
						} else {
							false;
						};
					};
				};
				case 2: {
					var ` = p[0];
					{
						var es = `;
						{
							var any = false;
							{
								var ` = 0;
								while (` < es.length) {
									var e = es[`];
									++ `;
									any = any || patternAllWildcards[0](e);
								};
							};
							any;
						};
					};
				};
				case 3: {
					var ` = p[0];
					{
						var es = `;
						{
							var any2 = false;
							{
								var ` = 0;
								while (` < es.length) {
									var e = es[`];
									++ `;
									any2 = any2 || patternAllWildcards[0](e);
								};
							};
							any2;
						};
					};
				};
				case 4: {
					var ` = p[0];
					var ` = p[1];
					{
						var h = `;
						var t = `;
						{
							patternAllWildcards[0](h) || patternAllWildcards[0](t);
						};
					};
				};
				default: {
					false;
				}
			};
		};
		var peelInnermost = function(n:reflaxe.elixir.ast.ElixirAST) {
			var cur = n;
			while (cur != null && cur.def != null) {
				@:ast(switch (cur.def) {
	case EBinary(Match, left, inner) if (lhsAllWildcards(left)):
		cur = inner;	
	case EMatch(pat, inner2) if (patternAllWildcards(pat)):
		cur = inner2;	
	default:
		return cur;	
}) {
					var ` = cur.def;
					switch (enumIndex `) {
						case 8: {
							var ` = `[0];
							var ` = `[1];
							{
								var pat = `;
								var inner2 = `;
								if (patternAllWildcards[0](pat)) {
									cur = inner2;
								} else {
									return cur;
								};
							};
						};
						case 26: {
							var ` = `[0];
							var ` = `[1];
							var ` = `[2];
							if (enumIndex ` == 27) {
								{
									var left = `;
									var inner = `;
									if (lhsAllWildcards[0](left)) {
										cur = inner;
									} else {
										return cur;
									};
								};
							} else {
								return cur;
							};
						};
						default: {
							return cur;
						}
					};
				};
			};
			return if (cur == null) {
				n;
			} else {
				cur;
			};
		};
		var containsCastCall = [null];
		containsCastCall[0] = function(e:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, _) if (isChangeset(mod) && fn == "cast"):
		true;	
	case ERaw(code) if (code != null && code.indexOf("Ecto.Changeset.cast(") != -1):
		true;	
	case EMatch(_, inner):
		containsCastCall(inner);	
	case EBinary(Match, _, right):
		containsCastCall(right);	
	case EParen(inner):
		containsCastCall(inner);	
	default:
		false;	
}) {
				var ` = e.def;
				switch (enumIndex `) {
					case 8: {
						var ` = `[0];
						var ` = `[1];
						{
							var inner = `;
							{
								containsCastCall[0](inner);
							};
						};
					};
					case 24: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						{
							var mod = `;
							var fn = `;
							if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
								var ` = mod.def;
								if (enumIndex ` == 38) {
									var ` = `[0];
									{
										var name = `;
										{
											name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
										};
									};
								} else {
									false;
								};
							} && fn == "cast") {
								true;
							} else {
								false;
							};
						};
					};
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var right = `;
								{
									containsCastCall[0](right);
								};
							};
						} else {
							false;
						};
					};
					case 54: {
						var ` = `[0];
						{
							var inner = `;
							{
								containsCastCall[0](inner);
							};
						};
					};
					case 62: {
						var ` = `[0];
						{
							var code = `;
							if (code != null && code.indexOf("Ecto.Changeset.cast(", null) != -1) {
								true;
							} else {
								false;
							};
						};
					};
					default: {
						false;
					}
				};
			};
		};
		var ensureInitialBinder = function(b:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (b.def) {
	case EBlock(stmts) if (stmts.length > 0):
		var first = stmts[0];
		var rhs:Null<ElixirAST> = null;
		switch (first.def) {
			case EBinary(Match, left, r) if (lhsAllWildcards(left) && containsCastCall(r)):
				rhs = peelInnermost(r);			
			case EMatch(pat, r2) if (patternAllWildcards(pat) && containsCastCall(r2)):
				rhs = r2;			
			default:
		};
		if (rhs != null) {
			var csAssign = makeASTWithMeta(EBinary(Match, makeAST(EVar("cs")), rhs), first.metadata, first.pos);
			var newStmts = [csAssign];
			for (i  in  1 ... stmts.length) newStmts.push(stmts[i]);
			makeASTWithMeta(EBlock(newStmts), b.metadata, b.pos);
		} else b;	
	default:
		b;	
}) {
				var ` = b.def;
				if (enumIndex ` == 53) {
					var ` = `[0];
					{
						var stmts = `;
						if (stmts.length > 0) {
							var first = stmts[0];
							var rhs = null;
							@:ast(switch (first.def) {
	case EBinary(Match, left, r) if (lhsAllWildcards(left) && containsCastCall(r)):
		rhs = peelInnermost(r);	
	case EMatch(pat, r2) if (patternAllWildcards(pat) && containsCastCall(r2)):
		rhs = r2;	
	default:
}) {
								var ` = first.def;
								switch (enumIndex `) {
									case 8: {
										var ` = `[0];
										var ` = `[1];
										{
											var pat = `;
											var r2 = `;
											if (patternAllWildcards[0](pat) && containsCastCall[0](r2)) {
												rhs = r2;
											} else {};
										};
									};
									case 26: {
										var ` = `[0];
										var ` = `[1];
										var ` = `[2];
										if (enumIndex ` == 27) {
											{
												var left = `;
												var r = `;
												if (lhsAllWildcards[0](left) && containsCastCall[0](r)) {
													rhs = peelInnermost(r);
												} else {};
											};
										} else {};
									};
									default: {}
								};
							};
							if (rhs != null) {
								var csAssign = {def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
									var pos = null;
									{def : reflaxe.elixir.ast.ElixirASTDef.EVar("cs"), metadata : {}, pos : pos};
								}, rhs), metadata : first.metadata, pos : first.pos};
								var newStmts = [csAssign];
								{
									var ` = 1;
									var ` = stmts.length;
									while (` < `) {
										var i = ` ++;
										newStmts.push(stmts[i]);
									};
								};
								{def : reflaxe.elixir.ast.ElixirASTDef.EBlock(newStmts), metadata : b.metadata, pos : b.pos};
							} else {
								b;
							};
						} else {
							b;
						};
					};
				} else {
					b;
				};
			};
		};
		var rewriteCastAssign = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case EBinary(Match, left, rhs) if (lhsAllWildcards(left) && containsCastCall(rhs)):
		makeASTWithMeta(EBinary(Match, makeAST(EVar("cs")), peelInnermost(rhs)), n.metadata, n.pos);	
	case EMatch(pat, rhs2) if (patternAllWildcards(pat) && containsCastCall(rhs2)):
		makeASTWithMeta(EBinary(Match, makeAST(EVar("cs")), rhs2), n.metadata, n.pos);	
	case ERaw(code) if (code != null && code.indexOf("Ecto.Changeset.cast(") != -1):
		makeASTWithMeta(EBinary(Match, makeAST(EVar("cs")), n), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 8: {
						var ` = `[0];
						var ` = `[1];
						{
							var pat = `;
							var rhs2 = `;
							if (patternAllWildcards[0](pat) && containsCastCall[0](rhs2)) {
								{def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
									var pos = null;
									{def : reflaxe.elixir.ast.ElixirASTDef.EVar("cs"), metadata : {}, pos : pos};
								}, rhs2), metadata : n.metadata, pos : n.pos};
							} else {
								n;
							};
						};
					};
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var left = `;
								var rhs = `;
								if (lhsAllWildcards[0](left) && containsCastCall[0](rhs)) {
									{
										var def = reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
											var pos = null;
											{def : reflaxe.elixir.ast.ElixirASTDef.EVar("cs"), metadata : {}, pos : pos};
										}, peelInnermost(rhs));
										var meta = n.metadata;
										var pos = n.pos;
										{def : def, metadata : meta, pos : pos};
									};
								} else {
									n;
								};
							};
						} else {
							n;
						};
					};
					case 62: {
						var ` = `[0];
						{
							var code = `;
							if (code != null && code.indexOf("Ecto.Changeset.cast(", null) != -1) {
								{def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
									var pos = null;
									{def : reflaxe.elixir.ast.ElixirASTDef.EVar("cs"), metadata : {}, pos : pos};
								}, n), metadata : n.metadata, pos : n.pos};
							} else {
								n;
							};
						};
					};
					default: {
						n;
					}
				};
			};
		};
		body = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(ensureInitialBinder(body), rewriteCastAssign);
		var csVar = [reflaxe.elixir.ast.transformers.ChangesetTransforms.findChangesetVar(body)];
		if (csVar[0] == null) {
			csVar[0] = "cs";
		};
		var renameOptsDecl = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case EMatch(PVar(v), expr) if (v == "_opts" && (isMap(expr) || isKeywordList(expr))):
		makeASTWithMeta(EMatch(PVar("opts"), expr), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 8) {
					var ` = `[0];
					var ` = `[1];
					if (enumIndex ` == 0) {
						var ` = `[0];
						{
							var v = `;
							var expr = `;
							if (v == "_opts" && (@:ast(switch (e.def) {
	case EMap(_):
		true;	
	default:
		false;	
}) {
								var ` = expr.def;
								if (enumIndex ` == 17) {
									var ` = `[0];
									{
										true;
									};
								} else {
									false;
								};
							} || @:ast(switch (e.def) {
	case EKeywordList(_):
		true;	
	default:
		false;	
}) {
								var ` = expr.def;
								if (enumIndex ` == 20) {
									var ` = `[0];
									{
										true;
									};
								} else {
									false;
								};
							})) {
								{def : reflaxe.elixir.ast.ElixirASTDef.EMatch(reflaxe.elixir.ast.EPattern.PVar("opts"), expr), metadata : n.metadata, pos : n.pos};
							} else {
								n;
							};
						};
					} else {
						n;
					};
				} else {
					n;
				};
			};
		};
		var binderAfterRequired = [reflaxe.elixir.ast.transformers.ChangesetTransforms.findValidateRequiredVar(body)];
		if (binderAfterRequired[0] == null) {
			binderAfterRequired[0] = csVar[0];
		};
		var rewriteValidateCalls = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case ERemoteCall(mod, fn, args) if (isChangesetValidate(mod, fn, args)):
		var a = args.copy();
		if (a.length > 0) {
			var targetBinder = (fn == "validate_required") ? csVar : binderAfterRequired;
			a[0] = makeAST(EVar(targetBinder));
			if (a.length >= 2) {
				a[1] = (function(arg:ElixirAST) {
					return switch (arg.def) {
						case ERemoteCall({ def : EVar(m) }, f, [fld]) if (m == "String" && f == "to_atom"):
							switch (fld.def) {
								case EString(s):
									makeAST(EAtom(s));								
								default:
									arg;								
							};						
						case EString(s):
							makeAST(EAtom(s));						
						default:
							arg;						
					};
				})(a[1]);
			};
		};
		makeASTWithMeta(ERemoteCall(mod, fn, a), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 24) {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						var args = `;
						if (if (! @:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
							var ` = mod.def;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var name = `;
									{
										name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
									};
								};
							} else {
								false;
							};
						}) {
							false;
						} else {
							if (args == null || args.length == 0) {
								false;
							} else {
								@:ast(switch (func) {
	case "validate_required" | "validate_length":
		true;	
	default:
		false;	
}) switch (fn) {
									case "validate_length", "validate_required": {
										{
											true;
										};
									};
									default: {
										false;
									}
								};
							};
						}) {
							var a = args.copy();
							if (a.length > 0) {
								var targetBinder = if ((fn == "validate_required")) {
									csVar[0];
								} else {
									binderAfterRequired[0];
								};
								a[0] = {
									var pos = null;
									{def : reflaxe.elixir.ast.ElixirASTDef.EVar(targetBinder), metadata : {}, pos : pos};
								};
								if (a.length >= 2) {
									a[1] = (function(arg:reflaxe.elixir.ast.ElixirAST) {
										return @:ast(switch (arg.def) {
	case ERemoteCall({ def : EVar(m) }, f, [fld]) if (m == "String" && f == "to_atom"):
		switch (fld.def) {
			case EString(s):
				makeAST(EAtom(s));			
			default:
				arg;			
		};	
	case EString(s):
		makeAST(EAtom(s));	
	default:
		arg;	
}) {
											var ` = arg.def;
											switch (enumIndex `) {
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															if (`.length == 1) {
																var ` = `[0];
																{
																	var fld = `;
																	var f = `;
																	var m = `;
																	if (m == "String" && f == "to_atom") {
																		@:ast(switch (fld.def) {
	case EString(s):
		makeAST(EAtom(s));	
	default:
		arg;	
}) {
																			var ` = fld.def;
																			if (enumIndex ` == 32) {
																				var ` = `[0];
																				{
																					var s = `;
																					{
																						{
																							var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																								var this;
																								this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
																								cast this;
																							});
																							var pos = null;
																							{def : def, metadata : {}, pos : pos};
																						};
																					};
																				};
																			} else {
																				arg;
																			};
																		};
																	} else {
																		arg;
																	};
																};
															} else {
																arg;
															};
														} else {
															arg;
														};
													};
												};
												case 32: {
													var ` = `[0];
													{
														var s = `;
														{
															{
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															};
														};
													};
												};
												default: {
													arg;
												}
											};
										};
									})(a[1]);
								};
							};
							{def : reflaxe.elixir.ast.ElixirASTDef.ERemoteCall(mod, fn, a), metadata : n.metadata, pos : n.pos};
						} else {
							n;
						};
					};
				} else {
					n;
				};
			};
		};
		var rebindStandaloneValidate = function(n:reflaxe.elixir.ast.ElixirAST) {
			{};
			return @:ast(switch (n.def) {
	case EMatch(PVar("_"), rhs) if (isValidateLengthCall(rhs)):
		makeASTWithMeta(EMatch(PVar(csVar), rhs), n.metadata, n.pos);	
	case EMatch(PVar("_"), rhs) if (isValidateCall(rhs)):
		makeASTWithMeta(EBinary(Match, makeAST(EVar(csVar)), rhs), n.metadata, n.pos);	
	case EBinary(Match, { def : EVar("_") }, rhs) if (isValidateCall(rhs)):
		makeASTWithMeta(EBinary(Match, makeAST(EVar(csVar)), rhs), n.metadata, n.pos);	
	case ERemoteCall(mod2, fn2, args2) if (isChangesetValidate(mod2, fn2, args2)):
		makeASTWithMeta(EBinary(Match, makeAST(EVar(csVar)), n), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 8: {
						var ` = `[0];
						var ` = `[1];
						if (enumIndex ` == 0) {
							var ` = `[0];
							if (` == "_") {
								{
									var rhs = `;
									if (reflaxe.elixir.ast.transformers.ChangesetTransforms.isValidateLengthCall(rhs)) {
										{def : reflaxe.elixir.ast.ElixirASTDef.EMatch(reflaxe.elixir.ast.EPattern.PVar(csVar[0]), rhs), metadata : n.metadata, pos : n.pos};
									} else {
										var rhs = `;
										if (@:ast(switch (e.def) {
	case ERemoteCall(mod, fn, args):
		isChangesetValidate(mod, fn, args);	
	case ERaw(code):
		code != null && (code.indexOf("Ecto.Changeset.validate_required(") != -1 || code.indexOf("Ecto.Changeset.validate_length(") != -1);	
	default:
		false;	
}) {
											var ` = rhs.def;
											switch (enumIndex `) {
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var mod = `;
														var fn = `;
														var args = `;
														{
															if (! @:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
																var ` = mod.def;
																if (enumIndex ` == 38) {
																	var ` = `[0];
																	{
																		var name = `;
																		{
																			name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																		};
																	};
																} else {
																	false;
																};
															}) {
																false;
															} else {
																if (args == null || args.length == 0) {
																	false;
																} else {
																	@:ast(switch (func) {
	case "validate_required" | "validate_length":
		true;	
	default:
		false;	
}) switch (fn) {
																		case "validate_length", "validate_required": {
																			{
																				true;
																			};
																		};
																		default: {
																			false;
																		}
																	};
																};
															};
														};
													};
												};
												case 62: {
													var ` = `[0];
													{
														var code = `;
														{
															code != null && (code.indexOf("Ecto.Changeset.validate_required(", null) != -1 || code.indexOf("Ecto.Changeset.validate_length(", null) != -1);
														};
													};
												};
												default: {
													false;
												}
											};
										}) {
											{def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
												var pos = null;
												{def : reflaxe.elixir.ast.ElixirASTDef.EVar(csVar[0]), metadata : {}, pos : pos};
											}, rhs), metadata : n.metadata, pos : n.pos};
										} else {
											n;
										};
									};
								};
							} else {
								n;
							};
						} else {
							n;
						};
					};
					case 24: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						{
							var mod2 = `;
							var fn2 = `;
							var args2 = `;
							if (if (! @:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
								var ` = mod2.def;
								if (enumIndex ` == 38) {
									var ` = `[0];
									{
										var name = `;
										{
											name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
										};
									};
								} else {
									false;
								};
							}) {
								false;
							} else {
								if (args2 == null || args2.length == 0) {
									false;
								} else {
									@:ast(switch (func) {
	case "validate_required" | "validate_length":
		true;	
	default:
		false;	
}) switch (fn2) {
										case "validate_length", "validate_required": {
											{
												true;
											};
										};
										default: {
											false;
										}
									};
								};
							}) {
								{def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
									var pos = null;
									{def : reflaxe.elixir.ast.ElixirASTDef.EVar(csVar[0]), metadata : {}, pos : pos};
								}, n), metadata : n.metadata, pos : n.pos};
							} else {
								n;
							};
						};
					};
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var ` = `.def;
								var ` = `.metadata;
								var ` = `.pos;
								if (enumIndex ` == 38) {
									var ` = `[0];
									if (` == "_") {
										{
											var rhs = `;
											if (@:ast(switch (e.def) {
	case ERemoteCall(mod, fn, args):
		isChangesetValidate(mod, fn, args);	
	case ERaw(code):
		code != null && (code.indexOf("Ecto.Changeset.validate_required(") != -1 || code.indexOf("Ecto.Changeset.validate_length(") != -1);	
	default:
		false;	
}) {
												var ` = rhs.def;
												switch (enumIndex `) {
													case 24: {
														var ` = `[0];
														var ` = `[1];
														var ` = `[2];
														{
															var mod = `;
															var fn = `;
															var args = `;
															{
																if (! @:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
																	var ` = mod.def;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var name = `;
																			{
																				name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																			};
																		};
																	} else {
																		false;
																	};
																}) {
																	false;
																} else {
																	if (args == null || args.length == 0) {
																		false;
																	} else {
																		@:ast(switch (func) {
	case "validate_required" | "validate_length":
		true;	
	default:
		false;	
}) switch (fn) {
																			case "validate_length", "validate_required": {
																				{
																					true;
																				};
																			};
																			default: {
																				false;
																			}
																		};
																	};
																};
															};
														};
													};
													case 62: {
														var ` = `[0];
														{
															var code = `;
															{
																code != null && (code.indexOf("Ecto.Changeset.validate_required(", null) != -1 || code.indexOf("Ecto.Changeset.validate_length(", null) != -1);
															};
														};
													};
													default: {
														false;
													}
												};
											}) {
												{def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
													var pos = null;
													{def : reflaxe.elixir.ast.ElixirASTDef.EVar(csVar[0]), metadata : {}, pos : pos};
												}, rhs), metadata : n.metadata, pos : n.pos};
											} else {
												n;
											};
										};
									} else {
										n;
									};
								} else {
									n;
								};
							};
						} else {
							n;
						};
					};
					default: {
						n;
					}
				};
			};
		};
		{};
		var rewriteAssignmentLhs = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case EMatch(PVar(lhs), rhs) if (rhs != null):
		var isTarget = switch (rhs.def) {
			case ERemoteCall(m, f, _):
				isChangeset(m) && (f == "change" || f == "validate_required" || f == "validate_length");			
			case EMatch(_, inner):
				switch (inner.def) {
					case ERemoteCall(m2, f2, _):
						isChangeset(m2) && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");					
					default:
						false;					
				};			
			case EBinary(Match, _, r2):
				switch (r2.def) {
					case ERemoteCall(m3, f3, _):
						isChangeset(m3) && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");					
					default:
						false;					
				};			
			default:
				false;			
		};
		if (isTarget) {
			var newRhs = rhs;
			switch (rhs.def) {
				case EMatch(PVar(inner), innerExpr) if (isThisTemp(inner)):
					newRhs = innerExpr;				
				default:
			};
			if (lhs != csVar) {
				makeASTWithMeta(EMatch(PVar(csVar), newRhs), n.metadata, n.pos);
			} else makeASTWithMeta(EMatch(PVar(csVar), newRhs), n.metadata, n.pos);
		} else n;	
	case EBinary(Match, left, rhs):
		var isTarget = switch (rhs.def) {
			case ERemoteCall(m, f, _):
				isChangeset(m) && (f == "change" || f == "validate_required" || f == "validate_length");			
			case EMatch(_, inner):
				switch (inner.def) {
					case ERemoteCall(m2, f2, _):
						isChangeset(m2) && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");					
					default:
						false;					
				};			
			case EBinary(Match, _, r2):
				switch (r2.def) {
					case ERemoteCall(m3, f3, _):
						isChangeset(m3) && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");					
					default:
						false;					
				};			
			default:
				false;			
		};
		if (isTarget) {
			var newRhs = rhs;
			switch (rhs.def) {
				case EMatch(PVar(inner), innerExpr) if (isThisTemp(inner)):
					newRhs = innerExpr;				
				default:
			};
			makeASTWithMeta(EBinary(Match, makeAST(EVar(csVar)), newRhs), n.metadata, n.pos);
		} else n;	
	default:
		n;	
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 8: {
						var ` = `[0];
						var ` = `[1];
						if (enumIndex ` == 0) {
							var ` = `[0];
							{
								var lhs = `;
								var rhs = `;
								if (rhs != null) {
									var isTarget = @:ast(switch (rhs.def) {
	case ERemoteCall(m, f, _):
		isChangeset(m) && (f == "change" || f == "validate_required" || f == "validate_length");	
	case EMatch(_, inner):
		switch (inner.def) {
			case ERemoteCall(m2, f2, _):
				isChangeset(m2) && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");			
			default:
				false;			
		};	
	case EBinary(Match, _, r2):
		switch (r2.def) {
			case ERemoteCall(m3, f3, _):
				isChangeset(m3) && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");			
			default:
				false;			
		};	
	default:
		false;	
}) {
										var ` = rhs.def;
										switch (enumIndex `) {
											case 8: {
												var ` = `[0];
												var ` = `[1];
												{
													var inner = `;
													{
														@:ast(switch (inner.def) {
	case ERemoteCall(m2, f2, _):
		isChangeset(m2) && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");	
	default:
		false;	
}) {
															var ` = inner.def;
															if (enumIndex ` == 24) {
																var ` = `[0];
																var ` = `[1];
																var ` = `[2];
																{
																	var m2 = `;
																	var f2 = `;
																	{
																		@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
																			var ` = m2.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var name = `;
																					{
																						name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																					};
																				};
																			} else {
																				false;
																			};
																		} && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");
																	};
																};
															} else {
																false;
															};
														};
													};
												};
											};
											case 24: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var m = `;
													var f = `;
													{
														@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
															var ` = m.def;
															if (enumIndex ` == 38) {
																var ` = `[0];
																{
																	var name = `;
																	{
																		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																	};
																};
															} else {
																false;
															};
														} && (f == "change" || f == "validate_required" || f == "validate_length");
													};
												};
											};
											case 26: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												if (enumIndex ` == 27) {
													{
														var r2 = `;
														{
															@:ast(switch (r2.def) {
	case ERemoteCall(m3, f3, _):
		isChangeset(m3) && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");	
	default:
		false;	
}) {
																var ` = r2.def;
																if (enumIndex ` == 24) {
																	var ` = `[0];
																	var ` = `[1];
																	var ` = `[2];
																	{
																		var m3 = `;
																		var f3 = `;
																		{
																			@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
																				var ` = m3.def;
																				if (enumIndex ` == 38) {
																					var ` = `[0];
																					{
																						var name = `;
																						{
																							name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																						};
																					};
																				} else {
																					false;
																				};
																			} && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");
																		};
																	};
																} else {
																	false;
																};
															};
														};
													};
												} else {
													false;
												};
											};
											default: {
												false;
											}
										};
									};
									if (isTarget) {
										var newRhs = rhs;
										@:ast(switch (rhs.def) {
	case EMatch(PVar(inner), innerExpr) if (isThisTemp(inner)):
		newRhs = innerExpr;	
	default:
}) {
											var ` = rhs.def;
											if (enumIndex ` == 8) {
												var ` = `[0];
												var ` = `[1];
												if (enumIndex ` == 0) {
													var ` = `[0];
													{
														var inner = `;
														var innerExpr = `;
														if (inner != null && (StringTools.startsWith(inner, "this") || StringTools.startsWith(inner, "_this"))) {
															newRhs = innerExpr;
														} else {};
													};
												} else {};
											} else {};
										};
										if (lhs != csVar[0]) {
											{def : reflaxe.elixir.ast.ElixirASTDef.EMatch(reflaxe.elixir.ast.EPattern.PVar(csVar[0]), newRhs), metadata : n.metadata, pos : n.pos};
										} else {
											{def : reflaxe.elixir.ast.ElixirASTDef.EMatch(reflaxe.elixir.ast.EPattern.PVar(csVar[0]), newRhs), metadata : n.metadata, pos : n.pos};
										};
									} else {
										n;
									};
								} else {
									n;
								};
							};
						} else {
							n;
						};
					};
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var left = `;
								var rhs = `;
								{
									var isTarget = @:ast(switch (rhs.def) {
	case ERemoteCall(m, f, _):
		isChangeset(m) && (f == "change" || f == "validate_required" || f == "validate_length");	
	case EMatch(_, inner):
		switch (inner.def) {
			case ERemoteCall(m2, f2, _):
				isChangeset(m2) && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");			
			default:
				false;			
		};	
	case EBinary(Match, _, r2):
		switch (r2.def) {
			case ERemoteCall(m3, f3, _):
				isChangeset(m3) && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");			
			default:
				false;			
		};	
	default:
		false;	
}) {
										var ` = rhs.def;
										switch (enumIndex `) {
											case 8: {
												var ` = `[0];
												var ` = `[1];
												{
													var inner = `;
													{
														@:ast(switch (inner.def) {
	case ERemoteCall(m2, f2, _):
		isChangeset(m2) && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");	
	default:
		false;	
}) {
															var ` = inner.def;
															if (enumIndex ` == 24) {
																var ` = `[0];
																var ` = `[1];
																var ` = `[2];
																{
																	var m2 = `;
																	var f2 = `;
																	{
																		@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
																			var ` = m2.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var name = `;
																					{
																						name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																					};
																				};
																			} else {
																				false;
																			};
																		} && (f2 == "change" || f2 == "validate_required" || f2 == "validate_length");
																	};
																};
															} else {
																false;
															};
														};
													};
												};
											};
											case 24: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												{
													var m = `;
													var f = `;
													{
														@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
															var ` = m.def;
															if (enumIndex ` == 38) {
																var ` = `[0];
																{
																	var name = `;
																	{
																		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																	};
																};
															} else {
																false;
															};
														} && (f == "change" || f == "validate_required" || f == "validate_length");
													};
												};
											};
											case 26: {
												var ` = `[0];
												var ` = `[1];
												var ` = `[2];
												if (enumIndex ` == 27) {
													{
														var r2 = `;
														{
															@:ast(switch (r2.def) {
	case ERemoteCall(m3, f3, _):
		isChangeset(m3) && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");	
	default:
		false;	
}) {
																var ` = r2.def;
																if (enumIndex ` == 24) {
																	var ` = `[0];
																	var ` = `[1];
																	var ` = `[2];
																	{
																		var m3 = `;
																		var f3 = `;
																		{
																			@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
																				var ` = m3.def;
																				if (enumIndex ` == 38) {
																					var ` = `[0];
																					{
																						var name = `;
																						{
																							name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
																						};
																					};
																				} else {
																					false;
																				};
																			} && (f3 == "change" || f3 == "validate_required" || f3 == "validate_length");
																		};
																	};
																} else {
																	false;
																};
															};
														};
													};
												} else {
													false;
												};
											};
											default: {
												false;
											}
										};
									};
									if (isTarget) {
										var newRhs = rhs;
										@:ast(switch (rhs.def) {
	case EMatch(PVar(inner), innerExpr) if (isThisTemp(inner)):
		newRhs = innerExpr;	
	default:
}) {
											var ` = rhs.def;
											if (enumIndex ` == 8) {
												var ` = `[0];
												var ` = `[1];
												if (enumIndex ` == 0) {
													var ` = `[0];
													{
														var inner = `;
														var innerExpr = `;
														if (inner != null && (StringTools.startsWith(inner, "this") || StringTools.startsWith(inner, "_this"))) {
															newRhs = innerExpr;
														} else {};
													};
												} else {};
											} else {};
										};
										{def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, {
											var pos = null;
											{def : reflaxe.elixir.ast.ElixirASTDef.EVar(csVar[0]), metadata : {}, pos : pos};
										}, newRhs), metadata : n.metadata, pos : n.pos};
									} else {
										n;
									};
								};
							};
						} else {
							n;
						};
					};
					default: {
						n;
					}
				};
			};
		};
		var rewriteOptsAccess = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		var keyAtom = switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};
		if (keyAtom != null) {
			makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(keyAtom))]), n.metadata, n.pos);
		} else n;	
	case EField({ def : EVar(v2) }, fld) if (v2 == "opts"):
		makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(fld))]), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 28: {
						var ` = `[0];
						var ` = `[1];
						{
							var ` = `.def;
							var ` = `.metadata;
							var ` = `.pos;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var v2 = `;
									var fld = `;
									if (v2 == "opts") {
										{
											var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
												var pos = null;
												{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
											}, "get", [{
												var pos = null;
												{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
											}, {
												var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
													var this;
													this = reflaxe.elixir.ast.NameUtils.toSnakeCase(fld);
													cast this;
												});
												var pos = null;
												{def : def, metadata : {}, pos : pos};
											}]);
											var meta = n.metadata;
											var pos = n.pos;
											{def : def, metadata : meta, pos : pos};
										};
									} else {
										n;
									};
								};
							} else {
								n;
							};
						};
					};
					case 29: {
						var ` = `[0];
						var ` = `[1];
						{
							var ` = `.def;
							var ` = `.metadata;
							var ` = `.pos;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var v = `;
									var key = `;
									if (v == "opts") {
										var keyAtom = @:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
											var ` = key.def;
											if (enumIndex ` == 31) {
												var ` = `[0];
												{
													var a = `;
													{
														a;
													};
												};
											} else {
												null;
											};
										};
										if (keyAtom != null) {
											{def : reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
												var pos = null;
												{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
											}, "get", [{
												var pos = null;
												{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
											}, {
												var pos = null;
												{def : reflaxe.elixir.ast.ElixirASTDef.EAtom(keyAtom), metadata : {}, pos : pos};
											}]), metadata : n.metadata, pos : n.pos};
										} else {
											n;
										};
									} else {
										n;
									};
								};
							} else {
								n;
							};
						};
					};
					default: {
						n;
					}
				};
			};
		};
		var wrapCond = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case ECond(clauses) if (condContainsValidateLength(clauses)):
		var rewritten = rewriteCondToReturnCsVar(clauses, csVar);
		makeASTWithMeta(EMatch(PVar(csVar), makeAST(ECond(rewritten))), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 7) {
					var ` = `[0];
					{
						var clauses = `;
						if (reflaxe.elixir.ast.transformers.ChangesetTransforms.condContainsValidateLength(clauses)) {
							var rewritten = reflaxe.elixir.ast.transformers.ChangesetTransforms.rewriteCondToReturnCsVar(clauses, csVar[0]);
							{def : reflaxe.elixir.ast.ElixirASTDef.EMatch(reflaxe.elixir.ast.EPattern.PVar(csVar[0]), {
								var pos = null;
								{def : reflaxe.elixir.ast.ElixirASTDef.ECond(rewritten), metadata : {}, pos : pos};
							}), metadata : n.metadata, pos : n.pos};
						} else {
							n;
						};
					};
				} else {
					n;
				};
			};
		};
		var pass1 = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(body, renameOptsDecl);
		var pass2 = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(pass1, rewriteValidateCalls);
		var pass2c = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(pass2, rewriteOptsAccess);
		var rewriteNilComparisonsLocal = function(n:reflaxe.elixir.ast.ElixirAST) {
			{};
			return @:ast(switch (n.def) {
	case EBinary(Equal, l, r):
		switch [isOptsField(l), r.def, isOptsField(r), l.def] {
			case [f, ENil, _, _] if (f != null):
				makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));			
			case [_, _, f2, ENil] if (f2 != null):
				makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));			
			default:
				n;			
		};	
	case EBinary(NotEqual, l2, r2):
		switch [isOptsField(l2), r2.def, isOptsField(r2), l2.def] {
			case [f, ENil, _, _] if (f != null):
				var inner = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));
				makeAST(ElixirASTDef.EUnary(Not, inner));			
			case [_, _, f2, ENil] if (f2 != null):
				var inner2 = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));
				makeAST(ElixirASTDef.EUnary(Not, inner2));			
			default:
				n;			
		};	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 26) {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					switch (enumIndex `) {
						case 6: {
							{
								var l = `;
								var r = `;
								{
									@:ast(switch [isOptsField(l), r.def, isOptsField(r), l.def] {
	case [f, ENil, _, _] if (f != null):
		makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));	
	case [_, _, f2, ENil] if (f2 != null):
		makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));	
	default:
		n;	
}) {
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = l.def;
											switch (enumIndex `) {
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															if (`.length == 2) {
																var ` = `[0];
																var ` = `[1];
																{
																	var tgt = `;
																	var key = `;
																	var f = `;
																	var m = `;
																	if (m == "Map" && f == "get") {
																		@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = tgt.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var v = `;
																					if (v == "opts") {
																						@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																							var ` = key.def;
																							if (enumIndex ` == 31) {
																								var ` = `[0];
																								{
																									var a = `;
																									{
																										a;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														} else {
															null;
														};
													};
												};
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = r.def;
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = r.def;
											switch (enumIndex `) {
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															if (`.length == 2) {
																var ` = `[0];
																var ` = `[1];
																{
																	var tgt = `;
																	var key = `;
																	var f = `;
																	var m = `;
																	if (m == "Map" && f == "get") {
																		@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = tgt.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var v = `;
																					if (v == "opts") {
																						@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																							var ` = key.def;
																							if (enumIndex ` == 31) {
																								var ` = `[0];
																								{
																									var a = `;
																									{
																										a;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														} else {
															null;
														};
													};
												};
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = l.def;
										if (enumIndex ` == 36) {
											{
												var f = `;
												if (f != null) {
													{
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
												} else if (enumIndex ` == 36) {
													{
														var f2 = `;
														if (f2 != null) {
															{
																var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																}, "is_nil", [{
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																	}, "get", [{
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																	}, {
																		var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																			var this;
																			this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																			cast this;
																		});
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																}]);
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															};
														} else {
															n;
														};
													};
												} else {
													n;
												};
											};
										} else if (enumIndex ` == 36) {
											{
												var f2 = `;
												if (f2 != null) {
													{
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
												} else {
													n;
												};
											};
										} else {
											n;
										};
									};
								};
							};
						};
						case 7: {
							{
								var l2 = `;
								var r2 = `;
								{
									@:ast(switch [isOptsField(l2), r2.def, isOptsField(r2), l2.def] {
	case [f, ENil, _, _] if (f != null):
		var inner = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));
		makeAST(ElixirASTDef.EUnary(Not, inner));	
	case [_, _, f2, ENil] if (f2 != null):
		var inner2 = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));
		makeAST(ElixirASTDef.EUnary(Not, inner2));	
	default:
		n;	
}) {
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = l2.def;
											switch (enumIndex `) {
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															if (`.length == 2) {
																var ` = `[0];
																var ` = `[1];
																{
																	var tgt = `;
																	var key = `;
																	var f = `;
																	var m = `;
																	if (m == "Map" && f == "get") {
																		@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = tgt.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var v = `;
																					if (v == "opts") {
																						@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																							var ` = key.def;
																							if (enumIndex ` == 31) {
																								var ` = `[0];
																								{
																									var a = `;
																									{
																										a;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														} else {
															null;
														};
													};
												};
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = r2.def;
										var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
											var ` = r2.def;
											switch (enumIndex `) {
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															if (`.length == 2) {
																var ` = `[0];
																var ` = `[1];
																{
																	var tgt = `;
																	var key = `;
																	var f = `;
																	var m = `;
																	if (m == "Map" && f == "get") {
																		@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																			var ` = tgt.def;
																			if (enumIndex ` == 38) {
																				var ` = `[0];
																				{
																					var v = `;
																					if (v == "opts") {
																						@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																							var ` = key.def;
																							if (enumIndex ` == 31) {
																								var ` = `[0];
																								{
																									var a = `;
																									{
																										a;
																									};
																								};
																							} else {
																								null;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															} else {
																null;
															};
														} else {
															null;
														};
													};
												};
												case 28: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var fld = `;
																if (v == "opts") {
																	fld;
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												case 29: {
													var ` = `[0];
													var ` = `[1];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															{
																var v = `;
																var key = `;
																if (v == "opts") {
																	@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																		var ` = key.def;
																		if (enumIndex ` == 31) {
																			var ` = `[0];
																			{
																				var a = `;
																				{
																					a;
																				};
																			};
																		} else {
																			null;
																		};
																	};
																} else {
																	null;
																};
															};
														} else {
															null;
														};
													};
												};
												default: {
													null;
												}
											};
										};
										var ` = l2.def;
										if (enumIndex ` == 36) {
											{
												var f = `;
												if (f != null) {
													var inner = {
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
													{
														var pos = null;
														{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner), metadata : {}, pos : pos};
													};
												} else if (enumIndex ` == 36) {
													{
														var f2 = `;
														if (f2 != null) {
															var inner2 = {
																var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																}, "is_nil", [{
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																	}, "get", [{
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																	}, {
																		var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																			var this;
																			this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																			cast this;
																		});
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																}]);
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															};
															{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner2), metadata : {}, pos : pos};
															};
														} else {
															n;
														};
													};
												} else {
													n;
												};
											};
										} else if (enumIndex ` == 36) {
											{
												var f2 = `;
												if (f2 != null) {
													var inner2 = {
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
														}, "is_nil", [{
															var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
															}, "get", [{
																var pos = null;
																{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
															}, {
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															}]);
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var pos = null;
														{def : def, metadata : {}, pos : pos};
													};
													{
														var pos = null;
														{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner2), metadata : {}, pos : pos};
													};
												} else {
													n;
												};
											};
										} else {
											n;
										};
									};
								};
							};
						};
						default: {
							n;
						}
					};
				} else {
					n;
				};
			};
		};
		var pass2c2 = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(pass2c, rewriteNilComparisonsLocal);
		var wrapCondWithBinder = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case ECond(clauses) if (condContainsValidateLength(clauses)):
		var rewritten = rewriteCondToReturnCsVar(clauses, csVar);
		makeASTWithMeta(EMatch(PVar(csVar), makeAST(ECond(rewritten))), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 7) {
					var ` = `[0];
					{
						var clauses = `;
						if (reflaxe.elixir.ast.transformers.ChangesetTransforms.condContainsValidateLength(clauses)) {
							var rewritten = reflaxe.elixir.ast.transformers.ChangesetTransforms.rewriteCondToReturnCsVar(clauses, csVar[0]);
							{def : reflaxe.elixir.ast.ElixirASTDef.EMatch(reflaxe.elixir.ast.EPattern.PVar(csVar[0]), {
								var pos = null;
								{def : reflaxe.elixir.ast.ElixirASTDef.ECond(rewritten), metadata : {}, pos : pos};
							}), metadata : n.metadata, pos : n.pos};
						} else {
							n;
						};
					};
				} else {
					n;
				};
			};
		};
		var pass2a = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(pass2c2, rebindStandaloneValidate);
		var pass2b = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(pass2a, rewriteAssignmentLhs);
		var compressDoubleAssign = function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case EMatch(PVar(v1), { def : EMatch(PVar(v2), expr) }) if (v1 == v2):
		makeASTWithMeta(EMatch(PVar(v1), expr), n.metadata, n.pos);	
	case EBinary(Match, left, { def : EBinary(Match, left2, expr2) }):
		var l1 = switch (left.def) {
			case EVar(nm):
				nm;			
			default:
				null;			
		};
		var l2 = switch (left2.def) {
			case EVar(nm2):
				nm2;			
			default:
				null;			
		};
		if (l1 != null && l1 == l2) makeASTWithMeta(EBinary(Match, left, expr2), n.metadata, n.pos) else n;	
	default:
		n;	
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 8: {
						var ` = `[0];
						var ` = `[1];
						if (enumIndex ` == 0) {
							var ` = `[0];
							{
								var ` = `.def;
								var ` = `.metadata;
								var ` = `.pos;
								if (enumIndex ` == 8) {
									var ` = `[0];
									var ` = `[1];
									if (enumIndex ` == 0) {
										var ` = `[0];
										{
											var v2 = `;
											var expr = `;
											var v1 = `;
											if (v1 == v2) {
												{def : reflaxe.elixir.ast.ElixirASTDef.EMatch(reflaxe.elixir.ast.EPattern.PVar(v1), expr), metadata : n.metadata, pos : n.pos};
											} else {
												n;
											};
										};
									} else {
										n;
									};
								} else {
									n;
								};
							};
						} else {
							n;
						};
					};
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var ` = `.def;
								var ` = `.metadata;
								var ` = `.pos;
								if (enumIndex ` == 26) {
									var ` = `[0];
									var ` = `[1];
									var ` = `[2];
									if (enumIndex ` == 27) {
										{
											var left2 = `;
											var expr2 = `;
											var left = `;
											{
												var l1 = @:ast(switch (left.def) {
	case EVar(nm):
		nm;	
	default:
		null;	
}) {
													var ` = left.def;
													if (enumIndex ` == 38) {
														var ` = `[0];
														{
															var nm = `;
															{
																nm;
															};
														};
													} else {
														null;
													};
												};
												var l2 = @:ast(switch (left2.def) {
	case EVar(nm2):
		nm2;	
	default:
		null;	
}) {
													var ` = left2.def;
													if (enumIndex ` == 38) {
														var ` = `[0];
														{
															var nm2 = `;
															{
																nm2;
															};
														};
													} else {
														null;
													};
												};
												if (l1 != null && l1 == l2) {
													{def : reflaxe.elixir.ast.ElixirASTDef.EBinary(reflaxe.elixir.ast.EBinaryOp.Match, left, expr2), metadata : n.metadata, pos : n.pos};
												} else {
													n;
												};
											};
										};
									} else {
										n;
									};
								} else {
									n;
								};
							};
						} else {
							n;
						};
					};
					default: {
						n;
					}
				};
			};
		};
		var pass2d = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(pass2b, compressDoubleAssign);
		return reflaxe.elixir.ast.ElixirASTTransformer.transformNode(pass2d, wrapCondWithBinder);
	}

	static function containsChangesetCallsDetect(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, _):
		switch (mod.def) {
			case EVar(m) if (m == "Ecto.Changeset"):
				true;			
			default:
				false;			
		};	
	case ERaw(code):
		code != null && code.indexOf("Ecto.Changeset.") != -1;	
	case ECall(_, _, args):
		var found = false;
		if (args != null) for (a  in  args) if (containsChangesetCallsDetect(a)) {
			found = true;
			break;
		};
		found;	
	case ERemoteCall(t, _, args2):
		if (containsChangesetCallsDetect(t)) true else {
			var f = false;
			if (args2 != null) for (a  in  args2) if (containsChangesetCallsDetect(a)) {
				f = true;
				break;
			};
			f;
		};	
	case EParen(inner):
		containsChangesetCallsDetect(inner);	
	default:
		false;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 22: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var args = `;
						{
							var found = false;
							if (args != null) {
								{
									var ` = 0;
									while (` < args.length) {
										var a = args[`];
										++ `;
										if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangesetCallsDetect(a)) {
											found = true;
											break;
										};
									};
								};
							};
							found;
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						{
							@:ast(switch (mod.def) {
	case EVar(m) if (m == "Ecto.Changeset"):
		true;	
	default:
		false;	
}) {
								var ` = mod.def;
								if (enumIndex ` == 38) {
									var ` = `[0];
									{
										var m = `;
										if (m == "Ecto.Changeset") {
											true;
										} else {
											false;
										};
									};
								} else {
									false;
								};
							};
						};
					};
				};
				case 54: {
					var ` = `[0];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangesetCallsDetect(inner);
						};
					};
				};
				case 62: {
					var ` = `[0];
					{
						var code = `;
						{
							code != null && code.indexOf("Ecto.Changeset.", null) != -1;
						};
					};
				};
				default: {
					false;
				}
			};
		};
	}

	static inline function isThisLike(v:String) {
		return v == "this" || v == "this1" || v == "this2" || v == "_this1" || v == "_this2";
	}

	static inline function isMap(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case EMap(_):
		true;	
	default:
		false;	
}) {
			var ` = e.def;
			if (enumIndex ` == 17) {
				var ` = `[0];
				{
					true;
				};
			} else {
				false;
			};
		};
	}

	static inline function isKeywordList(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case EKeywordList(_):
		true;	
	default:
		false;	
}) {
			var ` = e.def;
			if (enumIndex ` == 20) {
				var ` = `[0];
				{
					true;
				};
			} else {
				false;
			};
		};
	}

	static function containsChangeCall(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, _) if (isChangeset(mod) && fn == "change"):
		true;	
	case ERaw(code) if (code != null && code.indexOf("Ecto.Changeset.change(") != -1):
		true;	
	case EMatch(_, inner):
		containsChangeCall(inner);	
	case EBinary(Match, _, right):
		containsChangeCall(right);	
	case EParen(inner):
		containsChangeCall(inner);	
	case EBlock(stmts):
		for (s  in  stmts) if (containsChangeCall(s)) return true;
		false;	
	default:
		false;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 8: {
					var ` = `[0];
					var ` = `[1];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangeCall(inner);
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
							var ` = mod.def;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var name = `;
									{
										name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
									};
								};
							} else {
								false;
							};
						} && fn == "change") {
							true;
						} else {
							false;
						};
					};
				};
				case 26: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (enumIndex ` == 27) {
						{
							var right = `;
							{
								reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangeCall(right);
							};
						};
					} else {
						false;
					};
				};
				case 53: {
					var ` = `[0];
					{
						var stmts = `;
						{
							{
								var ` = 0;
								while (` < stmts.length) {
									var s = stmts[`];
									++ `;
									if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangeCall(s)) {
										return true;
									};
								};
							};
							false;
						};
					};
				};
				case 54: {
					var ` = `[0];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangeCall(inner);
						};
					};
				};
				case 62: {
					var ` = `[0];
					{
						var code = `;
						if (code != null && code.indexOf("Ecto.Changeset.change(", null) != -1) {
							true;
						} else {
							false;
						};
					};
				};
				default: {
					false;
				}
			};
		};
	}

	static function extractChangeCall(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, args) if (isChangeset(mod) && fn == "change"):
		e;	
	case ERaw(_):
		e;	
	case EMatch(_, inner):
		extractChangeCall(inner);	
	case EBinary(Match, _, right):
		extractChangeCall(right);	
	case EParen(inner):
		extractChangeCall(inner);	
	case EBlock(stmts):
		for (s  in  stmts) {
			if (containsChangeCall(s)) return extractChangeCall(s);
		};
		e;	
	default:
		e;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 8: {
					var ` = `[0];
					var ` = `[1];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.extractChangeCall(inner);
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						var args = `;
						if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
							var ` = mod.def;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var name = `;
									{
										name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
									};
								};
							} else {
								false;
							};
						} && fn == "change") {
							e;
						} else {
							e;
						};
					};
				};
				case 26: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (enumIndex ` == 27) {
						{
							var right = `;
							{
								reflaxe.elixir.ast.transformers.ChangesetTransforms.extractChangeCall(right);
							};
						};
					} else {
						e;
					};
				};
				case 53: {
					var ` = `[0];
					{
						var stmts = `;
						{
							{
								var ` = 0;
								while (` < stmts.length) {
									var s = stmts[`];
									++ `;
									if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangeCall(s)) {
										return reflaxe.elixir.ast.transformers.ChangesetTransforms.extractChangeCall(s);
									};
								};
							};
							e;
						};
					};
				};
				case 54: {
					var ` = `[0];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.extractChangeCall(inner);
						};
					};
				};
				case 62: {
					var ` = `[0];
					{
						e;
					};
				};
				default: {
					e;
				}
			};
		};
	}

	static inline function isChangesetValidate(mod:reflaxe.elixir.ast.ElixirAST, func:String, args:Array<reflaxe.elixir.ast.ElixirAST>) {
		if (! @:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
			var ` = mod.def;
			if (enumIndex ` == 38) {
				var ` = `[0];
				{
					var name = `;
					{
						name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
					};
				};
			} else {
				false;
			};
		}) {
			return false;
		};
		if (args == null || args.length == 0) {
			return false;
		};
		return @:ast(switch (func) {
	case "validate_required" | "validate_length":
		true;	
	default:
		false;	
}) switch (func) {
			case "validate_length", "validate_required": {
				{
					true;
				};
			};
			default: {
				false;
			}
		};
	}

	static function isValidateLengthCall(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, args) if (isChangeset(mod) && fn == "validate_length"):
		true;	
	default:
		false;	
}) {
			var ` = e.def;
			if (enumIndex ` == 24) {
				var ` = `[0];
				var ` = `[1];
				var ` = `[2];
				{
					var mod = `;
					var fn = `;
					var args = `;
					if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
						var ` = mod.def;
						if (enumIndex ` == 38) {
							var ` = `[0];
							{
								var name = `;
								{
									name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
								};
							};
						} else {
							false;
						};
					} && fn == "validate_length") {
						true;
					} else {
						false;
					};
				};
			} else {
				false;
			};
		};
	}

	static function containsValidateCall(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, _) if (isChangeset(mod) && (fn == "validate_required" || fn == "validate_length")):
		true;	
	case ERaw(code) if (code != null && (code.indexOf("Ecto.Changeset.validate_required(") != -1 || code.indexOf("Ecto.Changeset.validate_length(") != -1)):
		true;	
	case EMatch(_, inner):
		containsValidateCall(inner);	
	case EBinary(Match, _, right):
		containsValidateCall(right);	
	case EParen(inner):
		containsValidateCall(inner);	
	case EBlock(stmts):
		for (s  in  stmts) if (containsValidateCall(s)) return true;
		false;	
	default:
		false;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 8: {
					var ` = `[0];
					var ` = `[1];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateCall(inner);
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
							var ` = mod.def;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var name = `;
									{
										name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
									};
								};
							} else {
								false;
							};
						} && (fn == "validate_required" || fn == "validate_length")) {
							true;
						} else {
							false;
						};
					};
				};
				case 26: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (enumIndex ` == 27) {
						{
							var right = `;
							{
								reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateCall(right);
							};
						};
					} else {
						false;
					};
				};
				case 53: {
					var ` = `[0];
					{
						var stmts = `;
						{
							{
								var ` = 0;
								while (` < stmts.length) {
									var s = stmts[`];
									++ `;
									if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateCall(s)) {
										return true;
									};
								};
							};
							false;
						};
					};
				};
				case 54: {
					var ` = `[0];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateCall(inner);
						};
					};
				};
				case 62: {
					var ` = `[0];
					{
						var code = `;
						if (code != null && (code.indexOf("Ecto.Changeset.validate_required(", null) != -1 || code.indexOf("Ecto.Changeset.validate_length(", null) != -1)) {
							true;
						} else {
							false;
						};
					};
				};
				default: {
					false;
				}
			};
		};
	}

	static function extractValidateCall(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, args) if (isChangeset(mod) && (fn == "validate_required" || fn == "validate_length")):
		e;	
	case EMatch(_, inner):
		extractValidateCall(inner);	
	case EBinary(Match, _, right):
		extractValidateCall(right);	
	case EParen(inner):
		extractValidateCall(inner);	
	default:
		e;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 8: {
					var ` = `[0];
					var ` = `[1];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.extractValidateCall(inner);
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						var args = `;
						if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
							var ` = mod.def;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var name = `;
									{
										name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
									};
								};
							} else {
								false;
							};
						} && (fn == "validate_required" || fn == "validate_length")) {
							e;
						} else {
							e;
						};
					};
				};
				case 26: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (enumIndex ` == 27) {
						{
							var right = `;
							{
								reflaxe.elixir.ast.transformers.ChangesetTransforms.extractValidateCall(right);
							};
						};
					} else {
						e;
					};
				};
				case 54: {
					var ` = `[0];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.extractValidateCall(inner);
						};
					};
				};
				default: {
					e;
				}
			};
		};
	}

	static function condContainsValidateLength(clauses:Array<reflaxe.elixir.ast.ECondClause>) {
		{
			var ` = 0;
			while (` < clauses.length) {
				var c = clauses[`];
				++ `;
				if (c != null && c.body != null && reflaxe.elixir.ast.transformers.ChangesetTransforms.isValidateLengthCall(c.body)) {
					return true;
				};
			};
		};
		return false;
	}

	static function rewriteCondToReturnCsVar(clauses:Array<reflaxe.elixir.ast.ECondClause>, csVar:String) {
		var out = [];
		{
			var ` = 0;
			while (` < clauses.length) {
				var c = clauses[`];
				++ `;
				if (c == null) {
					continue;
				};
				var isDefault = @:ast(switch (c.condition.def) {
	case EBoolean(true):
		true;	
	case EAtom(name) if (name == "true"):
		true;	
	default:
		false;	
}) {
					var ` = c.condition.def;
					switch (enumIndex `) {
						case 31: {
							var ` = `[0];
							{
								var name = `;
								if (name == "true") {
									true;
								} else {
									false;
								};
							};
						};
						case 35: {
							var ` = `[0];
							if (` == true) {
								{
									true;
								};
							} else {
								false;
							};
						};
						default: {
							false;
						}
					};
				};
				if (isDefault) {
					continue;
				};
				var newBody = c.body;
				@:ast(switch (newBody.def) {
	case ERemoteCall(mod, fn, args) if (isChangeset(mod) && fn == "validate_length"):
		var a = args.copy();
		if (a.length > 0) a[0] = makeAST(EVar(csVar));
		if (a.length > 1) {
			a[1] = (function(arg:ElixirAST) {
				return switch (arg.def) {
					case EString(s):
						makeAST(EAtom(s));					
					case ERemoteCall({ def : EVar(m) }, f, [fld]) if (m == "String" && (f == "to_atom" || f == "to_existing_atom")):
						switch (fld.def) {
							case EString(s2):
								makeAST(EAtom(s2));							
							default:
								arg;							
						};					
					default:
						arg;					
				};
			})(a[1]);
		};
		var rebuilt = makeAST(ERemoteCall(mod, fn, a));
		function rewriteOptsAccessInKeyword(n:ElixirAST):ElixirAST {
			return switch (n.def) {
				case EAccess({ def : EVar(v) }, key) if (v == "opts"):
					var keyAtom = switch (key.def) {
						case EAtom(a):
							a;						
						default:
							null;						
					};
					if (keyAtom != null) {
						makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(keyAtom))]), n.metadata, n.pos);
					} else n;				
				case EField({ def : EVar(v2) }, fld) if (v2 == "opts"):
					makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(fld))]), n.metadata, n.pos);				
				default:
					n;				
			};
		};
		newBody = ElixirASTTransformer.transformNode(rebuilt, rewriteOptsAccessInKeyword);	
	default:
}) {
					var ` = newBody.def;
					if (enumIndex ` == 24) {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						{
							var mod = `;
							var fn = `;
							var args = `;
							if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
								var ` = mod.def;
								if (enumIndex ` == 38) {
									var ` = `[0];
									{
										var name = `;
										{
											name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
										};
									};
								} else {
									false;
								};
							} && fn == "validate_length") {
								var a = args.copy();
								if (a.length > 0) {
									a[0] = {
										var pos = null;
										{def : reflaxe.elixir.ast.ElixirASTDef.EVar(csVar), metadata : {}, pos : pos};
									};
								};
								if (a.length > 1) {
									a[1] = (function(arg:reflaxe.elixir.ast.ElixirAST) {
										return @:ast(switch (arg.def) {
	case EString(s):
		makeAST(EAtom(s));	
	case ERemoteCall({ def : EVar(m) }, f, [fld]) if (m == "String" && (f == "to_atom" || f == "to_existing_atom")):
		switch (fld.def) {
			case EString(s2):
				makeAST(EAtom(s2));			
			default:
				arg;			
		};	
	default:
		arg;	
}) {
											var ` = arg.def;
											switch (enumIndex `) {
												case 24: {
													var ` = `[0];
													var ` = `[1];
													var ` = `[2];
													{
														var ` = `.def;
														var ` = `.metadata;
														var ` = `.pos;
														if (enumIndex ` == 38) {
															var ` = `[0];
															if (`.length == 1) {
																var ` = `[0];
																{
																	var fld = `;
																	var f = `;
																	var m = `;
																	if (m == "String" && (f == "to_atom" || f == "to_existing_atom")) {
																		@:ast(switch (fld.def) {
	case EString(s2):
		makeAST(EAtom(s2));	
	default:
		arg;	
}) {
																			var ` = fld.def;
																			if (enumIndex ` == 32) {
																				var ` = `[0];
																				{
																					var s2 = `;
																					{
																						{
																							var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																								var this;
																								this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s2);
																								cast this;
																							});
																							var pos = null;
																							{def : def, metadata : {}, pos : pos};
																						};
																					};
																				};
																			} else {
																				arg;
																			};
																		};
																	} else {
																		arg;
																	};
																};
															} else {
																arg;
															};
														} else {
															arg;
														};
													};
												};
												case 32: {
													var ` = `[0];
													{
														var s = `;
														{
															{
																var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																	var this;
																	this = reflaxe.elixir.ast.NameUtils.toSnakeCase(s);
																	cast this;
																});
																var pos = null;
																{def : def, metadata : {}, pos : pos};
															};
														};
													};
												};
												default: {
													arg;
												}
											};
										};
									})(a[1]);
								};
								var rebuilt = {
									var pos = null;
									{def : reflaxe.elixir.ast.ElixirASTDef.ERemoteCall(mod, fn, a), metadata : {}, pos : pos};
								};
								var rewriteOptsAccessInKeyword = function(n:reflaxe.elixir.ast.ElixirAST) {
									return @:ast(switch (n.def) {
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		var keyAtom = switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};
		if (keyAtom != null) {
			makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(keyAtom))]), n.metadata, n.pos);
		} else n;	
	case EField({ def : EVar(v2) }, fld) if (v2 == "opts"):
		makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(fld))]), n.metadata, n.pos);	
	default:
		n;	
}) {
										var ` = n.def;
										switch (enumIndex `) {
											case 28: {
												var ` = `[0];
												var ` = `[1];
												{
													var ` = `.def;
													var ` = `.metadata;
													var ` = `.pos;
													if (enumIndex ` == 38) {
														var ` = `[0];
														{
															var v2 = `;
															var fld = `;
															if (v2 == "opts") {
																{
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																	}, "get", [{
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																	}, {
																		var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																			var this;
																			this = reflaxe.elixir.ast.NameUtils.toSnakeCase(fld);
																			cast this;
																		});
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var meta = n.metadata;
																	var pos = n.pos;
																	{def : def, metadata : meta, pos : pos};
																};
															} else {
																n;
															};
														};
													} else {
														n;
													};
												};
											};
											case 29: {
												var ` = `[0];
												var ` = `[1];
												{
													var ` = `.def;
													var ` = `.metadata;
													var ` = `.pos;
													if (enumIndex ` == 38) {
														var ` = `[0];
														{
															var v = `;
															var key = `;
															if (v == "opts") {
																var keyAtom = @:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																	var ` = key.def;
																	if (enumIndex ` == 31) {
																		var ` = `[0];
																		{
																			var a = `;
																			{
																				a;
																			};
																		};
																	} else {
																		null;
																	};
																};
																if (keyAtom != null) {
																	{def : reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																	}, "get", [{
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																	}, {
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EAtom(keyAtom), metadata : {}, pos : pos};
																	}]), metadata : n.metadata, pos : n.pos};
																} else {
																	n;
																};
															} else {
																n;
															};
														};
													} else {
														n;
													};
												};
											};
											default: {
												n;
											}
										};
									};
								};
								newBody = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(rebuilt, rewriteOptsAccessInKeyword);
							} else {};
						};
					} else {};
				};
				var normalizedCond = (function(condIn:reflaxe.elixir.ast.ElixirAST) {
					var rewriteOptsAccessLocal = function(n:reflaxe.elixir.ast.ElixirAST) {
						return @:ast(switch (n.def) {
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		var keyAtom = switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};
		if (keyAtom != null) {
			makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(keyAtom))]), n.metadata, n.pos);
		} else n;	
	case EField({ def : EVar(v2) }, fld) if (v2 == "opts"):
		makeASTWithMeta(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(fld))]), n.metadata, n.pos);	
	default:
		n;	
}) {
							var ` = n.def;
							switch (enumIndex `) {
								case 28: {
									var ` = `[0];
									var ` = `[1];
									{
										var ` = `.def;
										var ` = `.metadata;
										var ` = `.pos;
										if (enumIndex ` == 38) {
											var ` = `[0];
											{
												var v2 = `;
												var fld = `;
												if (v2 == "opts") {
													{
														var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
														}, "get", [{
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
														}, {
															var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																var this;
																this = reflaxe.elixir.ast.NameUtils.toSnakeCase(fld);
																cast this;
															});
															var pos = null;
															{def : def, metadata : {}, pos : pos};
														}]);
														var meta = n.metadata;
														var pos = n.pos;
														{def : def, metadata : meta, pos : pos};
													};
												} else {
													n;
												};
											};
										} else {
											n;
										};
									};
								};
								case 29: {
									var ` = `[0];
									var ` = `[1];
									{
										var ` = `.def;
										var ` = `.metadata;
										var ` = `.pos;
										if (enumIndex ` == 38) {
											var ` = `[0];
											{
												var v = `;
												var key = `;
												if (v == "opts") {
													var keyAtom = @:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
														var ` = key.def;
														if (enumIndex ` == 31) {
															var ` = `[0];
															{
																var a = `;
																{
																	a;
																};
															};
														} else {
															null;
														};
													};
													if (keyAtom != null) {
														{def : reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
														}, "get", [{
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
														}, {
															var pos = null;
															{def : reflaxe.elixir.ast.ElixirASTDef.EAtom(keyAtom), metadata : {}, pos : pos};
														}]), metadata : n.metadata, pos : n.pos};
													} else {
														n;
													};
												} else {
													n;
												};
											};
										} else {
											n;
										};
									};
								};
								default: {
									n;
								}
							};
						};
					};
					var rewriteNilComparisonForOpts = function(n:reflaxe.elixir.ast.ElixirAST) {
						{};
						return @:ast(switch (n.def) {
	case EBinary(Equal, l, r):
		switch [isOptsField(l), r.def, isOptsField(r), l.def] {
			case [f, ENil, _, _] if (f != null):
				makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));			
			case [_, _, f2, ENil] if (f2 != null):
				makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));			
			default:
				n;			
		};	
	case EBinary(NotEqual, l2, r2):
		switch [isOptsField(l2), r2.def, isOptsField(r2), l2.def] {
			case [f, ENil, _, _] if (f != null):
				var inner = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));
				makeAST(ElixirASTDef.EUnary(Not, inner));			
			case [_, _, f2, ENil] if (f2 != null):
				var inner2 = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));
				makeAST(ElixirASTDef.EUnary(Not, inner2));			
			default:
				n;			
		};	
	default:
		n;	
}) {
							var ` = n.def;
							if (enumIndex ` == 26) {
								var ` = `[0];
								var ` = `[1];
								var ` = `[2];
								switch (enumIndex `) {
									case 6: {
										{
											var l = `;
											var r = `;
											{
												@:ast(switch [isOptsField(l), r.def, isOptsField(r), l.def] {
	case [f, ENil, _, _] if (f != null):
		makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));	
	case [_, _, f2, ENil] if (f2 != null):
		makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));	
	default:
		n;	
}) {
													var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
														var ` = l.def;
														switch (enumIndex `) {
															case 24: {
																var ` = `[0];
																var ` = `[1];
																var ` = `[2];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		if (`.length == 2) {
																			var ` = `[0];
																			var ` = `[1];
																			{
																				var tgt = `;
																				var key = `;
																				var f = `;
																				var m = `;
																				if (m == "Map" && f == "get") {
																					@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																						var ` = tgt.def;
																						if (enumIndex ` == 38) {
																							var ` = `[0];
																							{
																								var v = `;
																								if (v == "opts") {
																									@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																										var ` = key.def;
																										if (enumIndex ` == 31) {
																											var ` = `[0];
																											{
																												var a = `;
																												{
																													a;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	} else {
																		null;
																	};
																};
															};
															case 28: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var fld = `;
																			if (v == "opts") {
																				fld;
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															case 29: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var key = `;
																			if (v == "opts") {
																				@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																					var ` = key.def;
																					if (enumIndex ` == 31) {
																						var ` = `[0];
																						{
																							var a = `;
																							{
																								a;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															default: {
																null;
															}
														};
													};
													var ` = r.def;
													var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
														var ` = r.def;
														switch (enumIndex `) {
															case 24: {
																var ` = `[0];
																var ` = `[1];
																var ` = `[2];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		if (`.length == 2) {
																			var ` = `[0];
																			var ` = `[1];
																			{
																				var tgt = `;
																				var key = `;
																				var f = `;
																				var m = `;
																				if (m == "Map" && f == "get") {
																					@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																						var ` = tgt.def;
																						if (enumIndex ` == 38) {
																							var ` = `[0];
																							{
																								var v = `;
																								if (v == "opts") {
																									@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																										var ` = key.def;
																										if (enumIndex ` == 31) {
																											var ` = `[0];
																											{
																												var a = `;
																												{
																													a;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	} else {
																		null;
																	};
																};
															};
															case 28: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var fld = `;
																			if (v == "opts") {
																				fld;
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															case 29: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var key = `;
																			if (v == "opts") {
																				@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																					var ` = key.def;
																					if (enumIndex ` == 31) {
																						var ` = `[0];
																						{
																							var a = `;
																							{
																								a;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															default: {
																null;
															}
														};
													};
													var ` = l.def;
													if (enumIndex ` == 36) {
														{
															var f = `;
															if (f != null) {
																{
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																	}, "is_nil", [{
																		var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																		}, "get", [{
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																		}, {
																			var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																				var this;
																				this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f);
																				cast this;
																			});
																			var pos = null;
																			{def : def, metadata : {}, pos : pos};
																		}]);
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																};
															} else if (enumIndex ` == 36) {
																{
																	var f2 = `;
																	if (f2 != null) {
																		{
																			var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																				var pos = null;
																				{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																			}, "is_nil", [{
																				var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																					var pos = null;
																					{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																				}, "get", [{
																					var pos = null;
																					{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																				}, {
																					var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																						var this;
																						this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																						cast this;
																					});
																					var pos = null;
																					{def : def, metadata : {}, pos : pos};
																				}]);
																				var pos = null;
																				{def : def, metadata : {}, pos : pos};
																			}]);
																			var pos = null;
																			{def : def, metadata : {}, pos : pos};
																		};
																	} else {
																		n;
																	};
																};
															} else {
																n;
															};
														};
													} else if (enumIndex ` == 36) {
														{
															var f2 = `;
															if (f2 != null) {
																{
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																	}, "is_nil", [{
																		var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																		}, "get", [{
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																		}, {
																			var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																				var this;
																				this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																				cast this;
																			});
																			var pos = null;
																			{def : def, metadata : {}, pos : pos};
																		}]);
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																};
															} else {
																n;
															};
														};
													} else {
														n;
													};
												};
											};
										};
									};
									case 7: {
										{
											var l2 = `;
											var r2 = `;
											{
												@:ast(switch [isOptsField(l2), r2.def, isOptsField(r2), l2.def] {
	case [f, ENil, _, _] if (f != null):
		var inner = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f))]))]));
		makeAST(ElixirASTDef.EUnary(Not, inner));	
	case [_, _, f2, ENil] if (f2 != null):
		var inner2 = makeAST(ERemoteCall(makeAST(EVar("Kernel")), "is_nil", [makeAST(ERemoteCall(makeAST(EVar("Map")), "get", [makeAST(EVar("opts")), makeAST(EAtom(f2))]))]));
		makeAST(ElixirASTDef.EUnary(Not, inner2));	
	default:
		n;	
}) {
													var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
														var ` = l2.def;
														switch (enumIndex `) {
															case 24: {
																var ` = `[0];
																var ` = `[1];
																var ` = `[2];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		if (`.length == 2) {
																			var ` = `[0];
																			var ` = `[1];
																			{
																				var tgt = `;
																				var key = `;
																				var f = `;
																				var m = `;
																				if (m == "Map" && f == "get") {
																					@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																						var ` = tgt.def;
																						if (enumIndex ` == 38) {
																							var ` = `[0];
																							{
																								var v = `;
																								if (v == "opts") {
																									@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																										var ` = key.def;
																										if (enumIndex ` == 31) {
																											var ` = `[0];
																											{
																												var a = `;
																												{
																													a;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	} else {
																		null;
																	};
																};
															};
															case 28: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var fld = `;
																			if (v == "opts") {
																				fld;
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															case 29: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var key = `;
																			if (v == "opts") {
																				@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																					var ` = key.def;
																					if (enumIndex ` == 31) {
																						var ` = `[0];
																						{
																							var a = `;
																							{
																								a;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															default: {
																null;
															}
														};
													};
													var ` = r2.def;
													var ` = @:ast(switch (e.def) {
	case EField({ def : EVar(v) }, fld) if (v == "opts"):
		fld;	
	case EAccess({ def : EVar(v) }, key) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	case ERemoteCall({ def : EVar(m) }, f, [tgt, key]) if (m == "Map" && f == "get"):
		switch (tgt.def) {
			case EVar(v) if (v == "opts"):
				switch (key.def) {
					case EAtom(a):
						a;					
					default:
						null;					
				};			
			default:
				null;			
		};	
	default:
		null;	
}) {
														var ` = r2.def;
														switch (enumIndex `) {
															case 24: {
																var ` = `[0];
																var ` = `[1];
																var ` = `[2];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		if (`.length == 2) {
																			var ` = `[0];
																			var ` = `[1];
																			{
																				var tgt = `;
																				var key = `;
																				var f = `;
																				var m = `;
																				if (m == "Map" && f == "get") {
																					@:ast(switch (tgt.def) {
	case EVar(v) if (v == "opts"):
		switch (key.def) {
			case EAtom(a):
				a;			
			default:
				null;			
		};	
	default:
		null;	
}) {
																						var ` = tgt.def;
																						if (enumIndex ` == 38) {
																							var ` = `[0];
																							{
																								var v = `;
																								if (v == "opts") {
																									@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																										var ` = key.def;
																										if (enumIndex ` == 31) {
																											var ` = `[0];
																											{
																												var a = `;
																												{
																													a;
																												};
																											};
																										} else {
																											null;
																										};
																									};
																								} else {
																									null;
																								};
																							};
																						} else {
																							null;
																						};
																					};
																				} else {
																					null;
																				};
																			};
																		} else {
																			null;
																		};
																	} else {
																		null;
																	};
																};
															};
															case 28: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var fld = `;
																			if (v == "opts") {
																				fld;
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															case 29: {
																var ` = `[0];
																var ` = `[1];
																{
																	var ` = `.def;
																	var ` = `.metadata;
																	var ` = `.pos;
																	if (enumIndex ` == 38) {
																		var ` = `[0];
																		{
																			var v = `;
																			var key = `;
																			if (v == "opts") {
																				@:ast(switch (key.def) {
	case EAtom(a):
		a;	
	default:
		null;	
}) {
																					var ` = key.def;
																					if (enumIndex ` == 31) {
																						var ` = `[0];
																						{
																							var a = `;
																							{
																								a;
																							};
																						};
																					} else {
																						null;
																					};
																				};
																			} else {
																				null;
																			};
																		};
																	} else {
																		null;
																	};
																};
															};
															default: {
																null;
															}
														};
													};
													var ` = l2.def;
													if (enumIndex ` == 36) {
														{
															var f = `;
															if (f != null) {
																var inner = {
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																	}, "is_nil", [{
																		var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																		}, "get", [{
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																		}, {
																			var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																				var this;
																				this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f);
																				cast this;
																			});
																			var pos = null;
																			{def : def, metadata : {}, pos : pos};
																		}]);
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																};
																{
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner), metadata : {}, pos : pos};
																};
															} else if (enumIndex ` == 36) {
																{
																	var f2 = `;
																	if (f2 != null) {
																		var inner2 = {
																			var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																				var pos = null;
																				{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																			}, "is_nil", [{
																				var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																					var pos = null;
																					{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																				}, "get", [{
																					var pos = null;
																					{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																				}, {
																					var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																						var this;
																						this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																						cast this;
																					});
																					var pos = null;
																					{def : def, metadata : {}, pos : pos};
																				}]);
																				var pos = null;
																				{def : def, metadata : {}, pos : pos};
																			}]);
																			var pos = null;
																			{def : def, metadata : {}, pos : pos};
																		};
																		{
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner2), metadata : {}, pos : pos};
																		};
																	} else {
																		n;
																	};
																};
															} else {
																n;
															};
														};
													} else if (enumIndex ` == 36) {
														{
															var f2 = `;
															if (f2 != null) {
																var inner2 = {
																	var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																		var pos = null;
																		{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Kernel"), metadata : {}, pos : pos};
																	}, "is_nil", [{
																		var def = reflaxe.elixir.ast.ElixirASTDef.ERemoteCall({
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("Map"), metadata : {}, pos : pos};
																		}, "get", [{
																			var pos = null;
																			{def : reflaxe.elixir.ast.ElixirASTDef.EVar("opts"), metadata : {}, pos : pos};
																		}, {
																			var def = reflaxe.elixir.ast.ElixirASTDef.EAtom(@:implicitCast {
																				var this;
																				this = reflaxe.elixir.ast.NameUtils.toSnakeCase(f2);
																				cast this;
																			});
																			var pos = null;
																			{def : def, metadata : {}, pos : pos};
																		}]);
																		var pos = null;
																		{def : def, metadata : {}, pos : pos};
																	}]);
																	var pos = null;
																	{def : def, metadata : {}, pos : pos};
																};
																{
																	var pos = null;
																	{def : reflaxe.elixir.ast.ElixirASTDef.EUnary(reflaxe.elixir.ast.EUnaryOp.Not, inner2), metadata : {}, pos : pos};
																};
															} else {
																n;
															};
														};
													} else {
														n;
													};
												};
											};
										};
									};
									default: {
										n;
									}
								};
							} else {
								n;
							};
						};
					};
					var stepA = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(condIn, rewriteOptsAccessLocal);
					var stepB = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(stepA, rewriteNilComparisonForOpts);
					return stepB;
				})(c.condition);
				out.push({condition : normalizedCond, body : newBody});
			};
		};
		out.push({condition : {
			var pos = null;
			{def : reflaxe.elixir.ast.ElixirASTDef.EBoolean(true), metadata : {}, pos : pos};
		}, body : {
			var pos = null;
			{def : reflaxe.elixir.ast.ElixirASTDef.EVar(csVar), metadata : {}, pos : pos};
		}});
		return out;
	}

	static function findChangesetVar(body:reflaxe.elixir.ast.ElixirAST) {
		var found = [null];
		var foundFromValidate = null;
		var visit = [null];
		visit[0] = function(n:reflaxe.elixir.ast.ElixirAST) {
			if (n == null || n.def == null || found[0] != null) {
				return;
			};
			@:ast(switch (n.def) {
	case EMatch(PVar(v), rhs) if (containsChangeCall(rhs)):
		found = v;	
	case EBinary(Match, left, rhs) if (containsChangeCall(rhs)):
		var v = getRightmostLhsVar(left);
		if (v != null) found = v;	
	case EBlock(stmts):
		for (s  in  stmts) visit(s);	
	default:
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 8: {
						var ` = `[0];
						var ` = `[1];
						if (enumIndex ` == 0) {
							var ` = `[0];
							{
								var v = `;
								var rhs = `;
								if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangeCall(rhs)) {
									found[0] = v;
								} else {};
							};
						} else {};
					};
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var left = `;
								var rhs = `;
								if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsChangeCall(rhs)) {
									var v = reflaxe.elixir.ast.transformers.ChangesetTransforms.getRightmostLhsVar(left);
									if (v != null) {
										found[0] = v;
									};
								} else {};
							};
						} else {};
					};
					case 53: {
						var ` = `[0];
						{
							var stmts = `;
							{
								{
									var ` = 0;
									while (` < stmts.length) {
										var s = stmts[`];
										++ `;
										visit[0](s);
									};
								};
							};
						};
					};
					default: {}
				};
			};
		};
		visit[0](body);
		return found[0];
	}

	static function findValidateRequiredVar(body:reflaxe.elixir.ast.ElixirAST) {
		var found = [null];
		var visit = [null];
		visit[0] = function(n:reflaxe.elixir.ast.ElixirAST) {
			if (n == null || n.def == null || found[0] != null) {
				return;
			};
			@:ast(switch (n.def) {
	case EMatch(PVar(v), rhs) if (containsValidateRequiredCall(rhs)):
		found = v;	
	case EBinary(Match, left, rhs) if (containsValidateRequiredCall(rhs)):
		var v2 = getRightmostLhsVar(left);
		if (v2 != null) found = v2;	
	case EBlock(stmts):
		for (s  in  stmts) visit(s);	
	default:
}) {
				var ` = n.def;
				switch (enumIndex `) {
					case 8: {
						var ` = `[0];
						var ` = `[1];
						if (enumIndex ` == 0) {
							var ` = `[0];
							{
								var v = `;
								var rhs = `;
								if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateRequiredCall(rhs)) {
									found[0] = v;
								} else {};
							};
						} else {};
					};
					case 26: {
						var ` = `[0];
						var ` = `[1];
						var ` = `[2];
						if (enumIndex ` == 27) {
							{
								var left = `;
								var rhs = `;
								if (reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateRequiredCall(rhs)) {
									var v2 = reflaxe.elixir.ast.transformers.ChangesetTransforms.getRightmostLhsVar(left);
									if (v2 != null) {
										found[0] = v2;
									};
								} else {};
							};
						} else {};
					};
					case 53: {
						var ` = `[0];
						{
							var stmts = `;
							{
								{
									var ` = 0;
									while (` < stmts.length) {
										var s = stmts[`];
										++ `;
										visit[0](s);
									};
								};
							};
						};
					};
					default: {}
				};
			};
		};
		visit[0](body);
		return found[0];
	}

	static function containsValidateRequiredCall(e:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (e.def) {
	case ERemoteCall(mod, fn, _) if (isChangeset(mod) && fn == "validate_required"):
		true;	
	case ERaw(code) if (code != null && code.indexOf("Ecto.Changeset.validate_required(") != -1):
		true;	
	case EMatch(_, inner):
		containsValidateRequiredCall(inner);	
	case EBinary(Match, _, right):
		containsValidateRequiredCall(right);	
	case EParen(inner):
		containsValidateRequiredCall(inner);	
	default:
		false;	
}) {
			var ` = e.def;
			switch (enumIndex `) {
				case 8: {
					var ` = `[0];
					var ` = `[1];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateRequiredCall(inner);
						};
					};
				};
				case 24: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					{
						var mod = `;
						var fn = `;
						if (@:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
							var ` = mod.def;
							if (enumIndex ` == 38) {
								var ` = `[0];
								{
									var name = `;
									{
										name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
									};
								};
							} else {
								false;
							};
						} && fn == "validate_required") {
							true;
						} else {
							false;
						};
					};
				};
				case 26: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (enumIndex ` == 27) {
						{
							var right = `;
							{
								reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateRequiredCall(right);
							};
						};
					} else {
						false;
					};
				};
				case 54: {
					var ` = `[0];
					{
						var inner = `;
						{
							reflaxe.elixir.ast.transformers.ChangesetTransforms.containsValidateRequiredCall(inner);
						};
					};
				};
				case 62: {
					var ` = `[0];
					{
						var code = `;
						if (code != null && code.indexOf("Ecto.Changeset.validate_required(", null) != -1) {
							true;
						} else {
							false;
						};
					};
				};
				default: {
					false;
				}
			};
		};
	}

	static function getRightmostLhsVar(lhs:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (lhs.def) {
	case EVar(n):
		n;	
	case EBinary(Match, _, right):
		switch (right.def) {
			case EVar(n):
				n;			
			case _:
				getRightmostLhsVar(right);			
		};	
	default:
		null;	
}) {
			var ` = lhs.def;
			switch (enumIndex `) {
				case 26: {
					var ` = `[0];
					var ` = `[1];
					var ` = `[2];
					if (enumIndex ` == 27) {
						{
							var right = `;
							{
								@:ast(switch (right.def) {
	case EVar(n):
		n;	
	case _:
		getRightmostLhsVar(right);	
}) {
									var ` = right.def;
									if (enumIndex ` == 38) {
										var ` = `[0];
										{
											var n = `;
											{
												n;
											};
										};
									} else {
										reflaxe.elixir.ast.transformers.ChangesetTransforms.getRightmostLhsVar(right);
									};
								};
							};
						};
					} else {
						null;
					};
				};
				case 38: {
					var ` = `[0];
					{
						var n = `;
						{
							n;
						};
					};
				};
				default: {
					null;
				}
			};
		};
	}

	static inline function isChangeset(mod:reflaxe.elixir.ast.ElixirAST) {
		return @:ast(switch (mod.def) {
	case EVar(name):
		name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset") != -1);	
	default:
		false;	
}) {
			var ` = mod.def;
			if (enumIndex ` == 38) {
				var ` = `[0];
				{
					var name = `;
					{
						name != null && (name == "Ecto.Changeset" || name.indexOf("Ecto.Changeset", null) != -1);
					};
				};
			} else {
				false;
			};
		};
	}
}