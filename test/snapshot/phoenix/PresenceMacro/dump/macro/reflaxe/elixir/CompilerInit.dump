class reflaxe.elixir.CompilerInit {

	public static function Start() {
		reflaxe.elixir.macros.LiveViewPreserver.init();
		try {
			haxe.macro.Compiler.addGlobalMetadata("", "@:build(reflaxe.elixir.macros.RepoEnumerator.ensureRepoKept())", null);
		} catch (`:Dynamic) {
			{};
			{};
			if (true) {
				{};
				{};
			} else throw `;
		};
		try {
			reflaxe.elixir.macros.RepoDiscovery.run();
		} catch (`:Dynamic) {
			{};
			{};
			if (true) {
				{};
				{};
			} else throw `;
		};
		var targetName = haxe.macro.Context.definedValue("target.name");
		try {
			var thisFile = haxe.macro.Context.resolvePath("reflaxe/elixir/CompilerInit.hx");
			var d0 = haxe.io.Path.directory(thisFile);
			var d1 = haxe.io.Path.directory(d0);
			var d2 = haxe.io.Path.directory(d1);
			var repoRoot = haxe.io.Path.directory(d2);
			var stagedStd = haxe.io.Path.normalize(haxe.io.Path.join([repoRoot, "std/_std"]));
			if (targetName == "elixir" || haxe.macro.Context.defined("elixir_output")) {
				haxe.macro.Compiler.addClassPath(stagedStd);
				try {
					haxe.macro.Compiler.addGlobalMetadata("*", "@:build(reflaxe.elixir.macros.TracePreserve.build())", true);
				} catch (`:Dynamic) {
					{};
					{};
					if (true) {
						{};
						{};
					} else throw `;
				};
			};
		} catch (`:Dynamic) {
			{};
			{};
			if (true) {
				{};
				{};
			} else throw `;
		};
		reflaxe.ReflectCompiler.AddCompiler(new reflaxe.elixir.ElixirCompiler(), {
			var ` = reflaxe.BaseCompilerFileOutputType.FilePerModule;
			var ` = [];
			var ` = cast false;
			var ` = cast true;
			new reflaxe.BaseCompilerOptions([reflaxe.preprocessors.ExpressionPreprocessor.Custom(new reflaxe.elixir.preprocessors.PreserveSwitchReturnsImpl()), reflaxe.preprocessors.ExpressionPreprocessor.RemoveTemporaryVariables(reflaxe.preprocessors.implementations.RemoveTemporaryVariablesMode.AllTempVariables), reflaxe.preprocessors.ExpressionPreprocessor.PreventRepeatVariables({
				new reflaxe.preprocessors.PreventRepeatVariablesOptions(null, null);
			}), reflaxe.preprocessors.ExpressionPreprocessor.RemoveSingleExpressionBlocks, reflaxe.preprocessors.ExpressionPreprocessor.RemoveConstantBoolIfs, reflaxe.preprocessors.ExpressionPreprocessor.RemoveUnnecessaryBlocks, reflaxe.preprocessors.ExpressionPreprocessor.RemoveReassignedVariableDeclarations, reflaxe.preprocessors.ExpressionPreprocessor.RemoveLocalVariableAliases, reflaxe.preprocessors.ExpressionPreprocessor.Custom(new reflaxe.elixir.preprocessors.FixVariableUsageDetection()), reflaxe.preprocessors.ExpressionPreprocessor.MarkUnusedVariables, reflaxe.preprocessors.ExpressionPreprocessor.Custom(new reflaxe.elixir.preprocessors.RemoveOrphanedEnumParametersImpl())], `, ".ex", "elixir_output", null, `, null, "__elixir__", null, null, null, null, null, null, null, `, `, null, null, null, null);
		});
	}
}