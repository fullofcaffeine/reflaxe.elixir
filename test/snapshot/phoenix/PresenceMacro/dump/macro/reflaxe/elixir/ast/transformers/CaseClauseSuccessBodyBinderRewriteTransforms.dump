class reflaxe.elixir.ast.transformers.CaseClauseSuccessBodyBinderRewriteTransforms {

	public static function pass(ast:reflaxe.elixir.ast.ElixirAST) {
		return reflaxe.elixir.ast.ElixirASTTransformer.transformNode(ast, function(n:reflaxe.elixir.ast.ElixirAST) {
			return @:ast(switch (n.def) {
	case ECase(target, clauses):
		var out = [];
		for (c  in  clauses) {
			var binder:Null<String> = null;
			switch (c.pattern) {
				case PTuple(els) if (els.length == 2):
					switch (els[0]) {
						case PLiteral({ def : EAtom(a) }) if ((a == ":ok" || a == "ok")):
							switch (els[1]) {
								case PVar(b) if (b != null):
									binder = b;								
								default:
							};						
						default:
					};				
				default:
			};
			if (binder == null) {
				out.push(c);
				continue;
			};
			var b = binder;
			var body2 = ElixirASTTransformer.transformNode(c.body, function(x:ElixirAST):ElixirAST {
				return switch (x.def) {
					case EVar(v) if (v == "ok_value" || v == ("ok_" + b)):
						makeASTWithMeta(EVar(b), x.metadata, x.pos);					
					default:
						x;					
				};
			});
			out.push({ pattern : c.pattern, guard : c.guard, body : body2 });
		};
		makeASTWithMeta(ECase(target, out), n.metadata, n.pos);	
	default:
		n;	
}) {
				var ` = n.def;
				if (enumIndex ` == 6) {
					var ` = `[0];
					var ` = `[1];
					{
						var target = `;
						var clauses = `;
						{
							var out = [];
							{
								var ` = 0;
								while (` < clauses.length) {
									var c = clauses[`];
									++ `;
									var binder = null;
									@:ast(switch (c.pattern) {
	case PTuple(els) if (els.length == 2):
		switch (els[0]) {
			case PLiteral({ def : EAtom(a) }) if ((a == ":ok" || a == "ok")):
				switch (els[1]) {
					case PVar(b) if (b != null):
						binder = b;					
					default:
				};			
			default:
		};	
	default:
}) {
										var ` = c.pattern;
										if (enumIndex ` == 2) {
											var ` = `[0];
											{
												var els = `;
												if (els.length == 2) {
													@:ast(switch (els[0]) {
	case PLiteral({ def : EAtom(a) }) if ((a == ":ok" || a == "ok")):
		switch (els[1]) {
			case PVar(b) if (b != null):
				binder = b;			
			default:
		};	
	default:
}) {
														var ` = els[0];
														if (enumIndex ` == 1) {
															var ` = `[0];
															{
																var ` = `.def;
																var ` = `.metadata;
																var ` = `.pos;
																if (enumIndex ` == 31) {
																	var ` = `[0];
																	{
																		var a = `;
																		if ((a == ":ok" || a == "ok")) {
																			@:ast(switch (els[1]) {
	case PVar(b) if (b != null):
		binder = b;	
	default:
}) {
																				var ` = els[1];
																				if (enumIndex ` == 0) {
																					var ` = `[0];
																					{
																						var b = `;
																						if (b != null) {
																							binder = b;
																						} else {};
																					};
																				} else {};
																			};
																		} else {};
																	};
																} else {};
															};
														} else {};
													};
												} else {};
											};
										} else {};
									};
									if (binder == null) {
										out.push(c);
										continue;
									};
									var b = binder;
									var body2 = reflaxe.elixir.ast.ElixirASTTransformer.transformNode(c.body, function(x:reflaxe.elixir.ast.ElixirAST) {
										return @:ast(switch (x.def) {
	case EVar(v) if (v == "ok_value" || v == ("ok_" + b)):
		makeASTWithMeta(EVar(b), x.metadata, x.pos);	
	default:
		x;	
}) {
											var ` = x.def;
											if (enumIndex ` == 38) {
												var ` = `[0];
												{
													var v = `;
													if (v == "ok_value" || v == ("ok_" + b)) {
														{def : reflaxe.elixir.ast.ElixirASTDef.EVar(b), metadata : x.metadata, pos : x.pos};
													} else {
														x;
													};
												};
											} else {
												x;
											};
										};
									});
									out.push({pattern : c.pattern, guard : c.guard, body : body2});
								};
							};
							{def : reflaxe.elixir.ast.ElixirASTDef.ECase(target, out), metadata : n.metadata, pos : n.pos};
						};
					};
				} else {
					n;
				};
			};
		});
	}
}