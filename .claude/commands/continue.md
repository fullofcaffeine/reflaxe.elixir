Follow the instructions below strictly. Do not edit this file.

If there's a summary report in the previous messages with clear next steps, take those next steps and integrate them into the plan below. These next steps should take precedence, but should follow the guidelines below, too.

Remember, you're a compiler development expert and you're a Haxe and Elixir expert, too. Follow the instructions on .claude/agents/haxe-reflaxe-compiler-expert.md.

Identify the current task we're working on in shrimp, including its ID, make sure that the progress you reported is updated there. If we changed course too much from the original intentions of the task, you should suggest a replan, if not, update the task and continue working.

If no current task in in progress, pick from the highest priority INPROGRESS task if any. If not, pick from the next highest PENDING task from the shrimp list, and continue.

The substaks should have the following format in the shrimp task:

- [ ] Subtask 1
- [ ] Subtask 2
- [ ] Subtask 3
      and so on.

Plan mode: You shoud verify if we have existing subtasks and update them, or add new ones if needed so as that restarting fro a fresh context is easy and frictionless. The task in shrimp should provide a detailed plan for completig the task, if not, research using shrimp (research mode) and update it accordingly, unless we're off from it and need a replan (see below). Only if needed.

It should be in the verification criteria, alongside other verification criteria.

If you finished a task, commit the changes with a descriptive commit message after the verify step is done and passed.

Don't forget that each task in shrimp should have a verification criteria to run the qa-sentinel as part of the verification process. It should also have a reminder to stick with the shrimp flow and keep the task/plan updated.

Remember that as part of the verification criteria, you should gather the output of the todoapp - output of the haxe compilatio, elixir compilation and finally the runtime errors, if any (use curl to call the todoapp endpoints and see if they work as expected). That output + the plan of the task should help create the deterministic feedback loop to verify if the task is done or not yet.

After each step you should also tell me how far are we from completing the task, based on the verification criteria.

IMPORTANT: It's very important we don't fall into a never-ending cycle, that's why you should keep shrimp updated and make sure the tasks are clear and have all the necessary info to be executed without friction. Each continue step should bring us closer to the goal and you should be aware of speifically what is left to do until the task in shrimp can be verified and marked as done. If you find stuff that needs to be done that is not part of the task, you should analyze the complexity and if it's falls into the task's umbrella, you should add it as a subtask, if not, you should suggest a replan to create a new task for it or update the plan accordingly.

WE SHOULD NEVER COUPLE THE COMPILER CODE TO THE TODOAPP CODE. THE COMPILER SHOULD BE GENERIC AND NOT TIED TO ANY SPECIFIC APP OR CODE. THIS IS VERY IMPORTANT. So, for example, not comparing against var names or specific code shapes from the todoapp. The compiler should be generic and work for any code.

Remember to use transformers wisely and only when needed. Don't overuse them, it might be a smell telling us the architecture of the compiler needs to change elsewhere. Justify the creation of transformers for me and in hxdoc. Always check if there's an existing transformer that can be adapted/used before creating a new one.

When you need to make a change in any component or transformer, you should first understand the compiler holistically. A new component should not break what another component did or undo it or cause regressions. You should understand the flow of the compiler and how data flows through it, and how each component interacts with each other. You should also check if there's any existing tests that cover the change you're making, if not, you should add them. For example, you should not add a new transformer to fix a warning or error if the root cause is elsewhere, you should fix it at the root cause and not add bandaids that might cause more problems in the future - the error/warning might disappear but it might cause other problems elsewhere (or other error and warnings), this should never happen!

Write idiomatic haxe and elixir code, follow best practices and patterns from the reference compilers and the languages. Follow SOLID principles and make sure the code is maintainable and clean. If you see a file growing too much (> 2k lines), then refactor it into smaller files, but don't be too strict about it, use your judgement depending on the case. Code quality should be high. Write self-descriptive code, with good descriptive variable names and structure. sFollow rules in all AGENTS.md you find.

DO NOT EDIT ex files directly!! We're working on a compiler so editing ex files directly should be the exception and you should first ask / tell me why. Otherwise, it should be generated by compiling hx code via the haxe->elixir compiler pipeline.

> > > After each task, use the qa-sentinel to verify .claude/agents/qa-sentinel.md << THIS IS VERY IMPORTANT and shuld be encoded in each task!
> > > After each task, tell me how far we are from 1.0/todoapp working without erorrs/warnings/runtime errors. Show me the percentage progress.
> > > IMPORTANT: DO NOT GROW SOURCE FILeS THAT ARE > 2000 lines. If you have an opporuntity to improve the code by extracting/modularizing, then do it. This is a hard directive that you should follow and should be part
> > > of all tasks in shrimp.
> > > Report the status of todoapp to the user, is it working without errors/warnings/runtime errors? This is very important as it's our e2e test for the compiler.
> > > As already documented here, ALL tasks should be tracked, either as a subtask of a task (update task) or a complete task in shrimp. Nothing should be done without being tracked.

When debugging the phoenix app when it starts, you should start it in the background and use curl to check the html output. You should also pay attention to the shell output of phx.server. We shall not tolarate any warnings or errors there, either, they should all be tackled following the principles here.

Execution mode: if the task is a good plan go work on it, unless it nees to be updated (instructions above), then update and go back to working on it. Let's do it and bring us closer to the goal! Let the user knwow. If you're ready to execute, then start check the right task on shrimp and start executing it.
