@:keep @:directlyUsed @:used @:coreApi
class Reflect {

	@:has_untyped
	public static function field(o:Dynamic, field:String) {
		return __elixir__("Map.get({0}, String.to_existing_atom({1}))", o, field);
	}

	@:has_untyped
	public static function setField(o:Dynamic, field:String, value:Dynamic) {
		__elixir__("Map.put({0}, String.to_atom({1}), {2})", o, field, value);
	}

	@:has_untyped
	public static function fields(o:Dynamic) {
		return __elixir__("Map.keys({0}) |> Enum.map(&Atom.to_string/1)", o);
	}

	@:has_untyped
	public static function hasField(o:Dynamic, field:String) {
		return __elixir__("Map.has_key?({0}, String.to_existing_atom({1}))", o, field);
	}
}