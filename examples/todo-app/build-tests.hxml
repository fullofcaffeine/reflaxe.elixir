# Haxeâ†’Elixir compilation for ExUnit tests (MIX_ENV=test)

# Use the compiler via haxelib/lix
-lib reflaxe.elixir

# Test sources only (avoid compiling app/server code into test output)
-cp src_haxe/test

# Output directory for generated test modules (isolated)
-D elixir_output=test/generated

# Required flags
-D reflaxe_runtime
-D reflaxe_elixir_strict_examples
-D no-utf16
-D app_name=TodoApp
-dce full

# Avoid re-emitting runtime std modules already compiled in the app build
--macro exclude('haxe.iterators.ArrayIterator')
--macro exclude('StringBuf')

# Include test modules (explicit for now; add more as needed)
web.HealthTest
web.TodoLiveCrudTest
live.TodoLiveDueDateTest
